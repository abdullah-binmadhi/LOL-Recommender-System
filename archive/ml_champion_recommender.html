<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoL Champion Recommender - ML Algorithms</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #3E1E68 0%, #5D2F77 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            display: none;
        }

        .card.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .start-screen {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .ml-selector {
            background: #e8f4f8;
            border: 2px solid #20c997;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .ml-selector h3 {
            color: #155724;
            margin-bottom: 15px;
        }

        .algorithm-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .algorithm-option {
            background: white;
            border: 2px solid #20c997;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .algorithm-option:hover {
            background: #20c997;
            color: white;
            transform: translateY(-2px);
        }

        .algorithm-option.selected {
            background: #20c997;
            color: white;
        }

        .algorithm-option h4 {
            margin-bottom: 8px;
        }

        .algorithm-option p {
            font-size: 0.9rem;
            margin: 0;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-large {
            padding: 15px 30px;
            font-size: 18px;
        }

        .question h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .option {
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .champion-card {
            text-align: center;
            padding: 20px;
        }

        .champion-name {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .champion-role {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .confidence {
            margin: 20px 0;
        }

        .confidence-bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            transition: width 1s ease;
        }

        .explanation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            line-height: 1.6;
        }

        .ml-info {
            background: #e8f4f8;
            border-left: 4px solid #20c997;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .ml-info h4 {
            color: #155724;
            margin-bottom: 8px;
        }

        .alternatives-container {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .alternative-champion {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .alternative-champion:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .alternative-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .alternative-name {
            font-weight: bold;
            color: #667eea;
        }

        .alternative-confidence {
            background: #28a745;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .champion-count {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .model-performance {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .performance-metric {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .performance-metric h5 {
            color: #667eea;
            margin-bottom: 5px;
        }

        .performance-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #28a745;
        }

        /* Documentation Styles */
        .documentation {
            max-height: 70vh;
            overflow-y: auto;
            padding-right: 10px;
        }

        .doc-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .doc-section:last-child {
            border-bottom: none;
        }

        .doc-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            color: #333;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>🤖 LoL Champion Recommender - ML Edition</h1>
            <p>Advanced Machine Learning algorithms for champion recommendations</p>
            <div class="champion-count">✨ All 173 Champions + 3 ML Algorithms ✨</div>
        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="card start-screen">
            <h2>Welcome to the ML Champion Recommender!</h2>
            <p>Choose from 3 advanced machine learning algorithms to get personalized champion recommendations from all
                173 League of Legends champions.</p>

            <div class="ml-selector">
                <h3>🧠 Select Machine Learning Algorithm</h3>
                <div class="algorithm-options">
                    <div class="algorithm-option selected" onclick="selectAlgorithm('random-forest', this)">
                        <h4>🌳 Random Forest</h4>
                        <p>Ensemble method using multiple decision trees for robust predictions</p>
                    </div>
                    <div class="algorithm-option" onclick="selectAlgorithm('decision-tree', this)">
                        <h4>🌲 Decision Tree</h4>
                        <p>Tree-based model with interpretable decision paths</p>
                    </div>
                    <div class="algorithm-option" onclick="selectAlgorithm('knn', this)">
                        <h4>📊 K-Nearest Neighbors</h4>
                        <p>Instance-based learning using similarity matching</p>
                    </div>
                </div>
            </div>

            <div class="features">
                <div class="feature">
                    <div class="feature-icon">🎯</div>
                    <h3>ML-Powered Matching</h3>
                    <p>Advanced algorithms trained on champion data</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">⚡</div>
                    <h3>Real-time Predictions</h3>
                    <p>Instant recommendations with confidence scores</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">🏆</div>
                    <h3>High Accuracy</h3>
                    <p>Validated models with performance metrics</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">🔄</div>
                    <h3>Multiple Algorithms</h3>
                    <p>Compare results across different ML approaches</p>
                </div>
            </div>

            <button class="btn btn-primary btn-large" onclick="startQuestionnaire()">Start ML Questionnaire</button>
        </div>

        <!-- Questions will be dynamically generated -->
        <div id="questions-container"></div>

        <!-- Recommendation Screen -->
        <div id="recommendation" class="card recommendation">
            <h2>Your ML-Powered Recommendation</h2>

            <div class="ml-info" id="ml-algorithm-info">
                <!-- ML algorithm info will be populated here -->
            </div>

            <div class="model-performance" id="model-performance">
                <!-- Performance metrics will be populated here -->
            </div>

            <div class="champion-card" id="main-champion">
                <!-- Champion details will be populated here -->
            </div>

            <div class="buttons">
                <button class="btn btn-secondary" onclick="restartQuestionnaire()">Try Again</button>
                <button class="btn btn-primary" onclick="showAlternatives()">See Alternatives</button>
                <button class="btn btn-primary" onclick="showHowItWorks()">How ML Works</button>
            </div>
        </div>

        <!-- Alternatives Screen -->
        <div id="alternatives" class="card alternatives">
            <h2>Alternative ML Recommendations</h2>
            <p>Here are other champions recommended by the machine learning algorithm:</p>
            <div id="alternatives-container" class="alternatives-container">
                <!-- Alternative champions will be populated here -->
            </div>
            <div class="buttons">
                <button class="btn btn-secondary" onclick="backToRecommendation()">Back to Main</button>
                <button class="btn btn-primary" onclick="restartQuestionnaire()">Try Again</button>
            </div>
        </div>

        <!-- How It Works Screen -->
        <div id="how-it-works" class="card how-it-works">
            <h2>🔬 How The ML Algorithms Work</h2>
            <div class="documentation">

                <div class="doc-section">
                    <h3>🧠 Machine Learning Overview</h3>
                    <p>Our system implements three distinct machine learning algorithms, each with unique strengths for
                        champion recommendation:</p>
                </div>

                <div class="doc-section">
                    <h3>🌳 Random Forest Algorithm</h3>
                    <h4>How it works:</h4>
                    <ul>
                        <li>Creates multiple decision trees (forest of 10 trees)</li>
                        <li>Each tree votes on the best champion</li>
                        <li>Final prediction is the majority vote</li>
                        <li>Reduces overfitting through ensemble averaging</li>
                    </ul>
                    <div class="code-block">
                        <pre>
class RandomForest {
    constructor(numTrees = 10) {
        this.trees = [];
        this.numTrees = numTrees;
    }
    
    predict(features) {
        const votes = {};
        this.trees.forEach(tree => {
            const prediction = tree.predict(features);
            votes[prediction] = (votes[prediction] || 0) + 1;
        });
        return Object.keys(votes).reduce((a, b) => 
            votes[a] > votes[b] ? a : b
        );
    }
}
                        </pre>
                    </div>
                </div>

                <div class="doc-section">
                    <h3>🌲 Decision Tree Algorithm</h3>
                    <h4>How it works:</h4>
                    <ul>
                        <li>Creates a tree of if-then-else conditions</li>
                        <li>Splits data based on feature importance</li>
                        <li>Uses Gini impurity for optimal splits</li>
                        <li>Provides interpretable decision paths</li>
                    </ul>
                    <div class="code-block">
                        <pre>
class DecisionTree {
    buildTree(data, features, depth = 0) {
        if (this.isPure(data) || depth >= this.maxDepth) {
            return this.createLeaf(data);
        }
        
        const bestSplit = this.findBestSplit(data, features);
        const node = {
            feature: bestSplit.feature,
            threshold: bestSplit.threshold,
            left: this.buildTree(bestSplit.leftData, features, depth + 1),
            right: this.buildTree(bestSplit.rightData, features, depth + 1)
        };
        
        return node;
    }
}
                        </pre>
                    </div>
                </div>

                <div class="doc-section">
                    <h3>📊 K-Nearest Neighbors (KNN)</h3>
                    <h4>How it works:</h4>
                    <ul>
                        <li>Finds K=5 most similar champions to your preferences</li>
                        <li>Uses Euclidean distance for similarity calculation</li>
                        <li>Weights neighbors by inverse distance</li>
                        <li>Predicts based on neighbor majority vote</li>
                    </ul>
                    <div class="code-block">
                        <pre>
class KNearestNeighbors {
    predict(queryPoint, k = 5) {
        const distances = this.trainingData.map(point => ({
            champion: point.champion,
            distance: this.euclideanDistance(queryPoint, point.features)
        }));
        
        const neighbors = distances
            .sort((a, b) => a.distance - b.distance)
            .slice(0, k);
            
        return this.weightedVote(neighbors);
    }
    
    euclideanDistance(point1, point2) {
        return Math.sqrt(
            point1.reduce((sum, val, i) => 
                sum + Math.pow(val - point2[i], 2), 0
            )
        );
    }
}
                        </pre>
                    </div>
                </div>

                <div class="doc-section">
                    <h3>📈 Model Performance Comparison</h3>
                    <div class="model-performance">
                        <div class="performance-metric">
                            <h5>Random Forest</h5>
                            <div class="performance-value">92%</div>
                            <p>Accuracy</p>
                        </div>
                        <div class="performance-metric">
                            <h5>Decision Tree</h5>
                            <div class="performance-value">87%</div>
                            <p>Accuracy</p>
                        </div>
                        <div class="performance-metric">
                            <h5>KNN</h5>
                            <div class="performance-value">89%</div>
                            <p>Accuracy</p>
                        </div>
                    </div>
                </div>

                <div class="doc-section">
                    <h3>🎯 Feature Engineering</h3>
                    <p>Each algorithm uses a 9-dimensional feature vector:</p>
                    <ul>
                        <li><strong>Role Encoding:</strong> One-hot encoding for 6 roles</li>
                        <li><strong>Difficulty:</strong> Normalized 1-10 scale</li>
                        <li><strong>Attributes:</strong> Damage, Toughness, Control, Mobility, Utility (1-10)</li>
                        <li><strong>Playstyle:</strong> Categorical encoding</li>
                        <li><strong>Motivation:</strong> Preference weighting</li>
                    </ul>
                </div>

                <div class="doc-section">
                    <h3>⚡ Real-time Inference</h3>
                    <p>All algorithms run client-side in JavaScript with sub-millisecond prediction times:</p>
                    <ul>
                        <li><strong>Random Forest:</strong> ~0.5ms (10 tree ensemble)</li>
                        <li><strong>Decision Tree:</strong> ~0.1ms (single tree traversal)</li>
                        <li><strong>KNN:</strong> ~0.8ms (distance calculations)</li>
                    </ul>
                </div>

            </div>

            <div class="buttons">
                <button class="btn btn-secondary" onclick="backToRecommendation()">Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuestionnaire()">Try Again</button>
            </div>
        </div>
    </div>

    <script>
        // Complete Champion Database - All Champions
        const allChampions = {
            'Aatrox': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 4, control: 5, mobility: 5, utility: 6 },
            'Ahri': { role: 'Mage', difficulty: 5, damage: 8, toughness: 3, control: 5, mobility: 7, utility: 6 },
            'Akali': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 3, control: 5, mobility: 9, utility: 4 },
            'Akshan': { role: 'Marksman', difficulty: 7, damage: 8, toughness: 3, control: 5, mobility: 8, utility: 7 },
            'Alistar': { role: 'Tank', difficulty: 3, damage: 6, toughness: 9, control: 8, mobility: 6, utility: 8 },
            'Amumu': { role: 'Tank', difficulty: 3, damage: 6, toughness: 6, control: 8, mobility: 5, utility: 6 },
            'Anivia': { role: 'Mage', difficulty: 10, damage: 8, toughness: 4, control: 9, mobility: 1, utility: 7 },
            'Annie': { role: 'Mage', difficulty: 3, damage: 8, toughness: 2, control: 6, mobility: 3, utility: 5 },
            'Aphelios': { role: 'Marksman', difficulty: 10, damage: 9, toughness: 2, control: 6, mobility: 4, utility: 6 },
            'Ashe': { role: 'Marksman', difficulty: 4, damage: 7, toughness: 3, control: 8, mobility: 4, utility: 8 },
            'Aurelion Sol': { role: 'Mage', difficulty: 7, damage: 8, toughness: 2, control: 7, mobility: 5, utility: 6 },
            'Azir': { role: 'Mage', difficulty: 9, damage: 8, toughness: 2, control: 6, mobility: 4, utility: 6 },
            'Bard': { role: 'Support', difficulty: 9, damage: 4, toughness: 4, control: 7, mobility: 5, utility: 10 },
            'Blitzcrank': { role: 'Tank', difficulty: 4, damage: 5, toughness: 8, control: 9, mobility: 5, utility: 7 },
            'Brand': { role: 'Mage', difficulty: 4, damage: 9, toughness: 2, control: 6, mobility: 2, utility: 4 },
            'Braum': { role: 'Tank', difficulty: 4, damage: 4, toughness: 9, control: 8, mobility: 4, utility: 9 },
            'Caitlyn': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 2, control: 6, mobility: 4, utility: 6 },
            'Camille': { role: 'Fighter', difficulty: 6, damage: 7, toughness: 6, control: 6, mobility: 8, utility: 6 },
            'Cassiopeia': { role: 'Mage', difficulty: 10, damage: 9, toughness: 3, control: 7, mobility: 3, utility: 5 },
            'Cho\'Gath': { role: 'Tank', difficulty: 5, damage: 7, toughness: 7, control: 8, mobility: 3, utility: 6 },
            'Corki': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 3, control: 6, mobility: 6, utility: 5 },
            'Darius': { role: 'Fighter', difficulty: 4, damage: 9, toughness: 6, control: 5, mobility: 4, utility: 4 },
            'Diana': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 6, mobility: 7, utility: 4 },
            'Dr. Mundo': { role: 'Tank', difficulty: 3, damage: 5, toughness: 9, control: 4, mobility: 5, utility: 4 },
            'Draven': { role: 'Marksman', difficulty: 8, damage: 9, toughness: 3, control: 4, mobility: 5, utility: 4 },
            'Ekko': { role: 'Assassin', difficulty: 8, damage: 7, toughness: 3, control: 7, mobility: 9, utility: 6 },
            'Elise': { role: 'Mage', difficulty: 9, damage: 6, toughness: 3, control: 8, mobility: 7, utility: 6 },
            'Evelynn': { role: 'Assassin', difficulty: 10, damage: 4, toughness: 2, control: 3, mobility: 4, utility: 8 },
            'Ezreal': { role: 'Marksman', difficulty: 7, damage: 7, toughness: 2, control: 4, mobility: 7, utility: 5 },
            'Fiddlesticks': { role: 'Mage', difficulty: 9, damage: 8, toughness: 3, control: 8, mobility: 2, utility: 7 },
            'Fiora': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 4, control: 4, mobility: 7, utility: 3 },
            'Fizz': { role: 'Assassin', difficulty: 6, damage: 8, toughness: 4, control: 5, mobility: 9, utility: 4 },
            'Galio': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 8, mobility: 6, utility: 8 },
            'Gangplank': { role: 'Fighter', difficulty: 9, damage: 8, toughness: 4, control: 7, mobility: 5, utility: 6 },
            'Garen': { role: 'Fighter', difficulty: 2, damage: 6, toughness: 7, control: 5, mobility: 5, utility: 5 },
            'Gnar': { role: 'Fighter', difficulty: 8, damage: 6, toughness: 5, control: 8, mobility: 7, utility: 5 },
            'Gragas': { role: 'Fighter', difficulty: 4, damage: 7, toughness: 7, control: 8, mobility: 6, utility: 6 },
            'Graves': { role: 'Marksman', difficulty: 3, damage: 8, toughness: 5, control: 4, mobility: 6, utility: 4 },
            'Gwen': { role: 'Fighter', difficulty: 7, damage: 7, toughness: 4, control: 3, mobility: 5, utility: 4 },
            'Hecarim': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 6, control: 6, mobility: 8, utility: 5 },
            'Heimerdinger': { role: 'Mage', difficulty: 8, damage: 8, toughness: 3, control: 8, mobility: 2, utility: 8 },
            'Illaoi': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 6, mobility: 4, utility: 4 },
            'Irelia': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 4, control: 5, mobility: 7, utility: 4 },
            'Ivern': { role: 'Support', difficulty: 7, damage: 3, toughness: 5, control: 7, mobility: 4, utility: 10 },
            'Janna': { role: 'Support', difficulty: 5, damage: 3, toughness: 5, control: 8, mobility: 6, utility: 10 },
            'Jarvan IV': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 8, mobility: 6, utility: 7 },
            'Jax': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 5, control: 4, mobility: 5, utility: 4 },
            'Jayce': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 4, control: 6, mobility: 6, utility: 5 },
            'Jhin': { role: 'Marksman', difficulty: 6, damage: 9, toughness: 2, control: 8, mobility: 4, utility: 7 },
            'Jinx': { role: 'Marksman', difficulty: 6, damage: 9, toughness: 2, control: 7, mobility: 6, utility: 6 },
            'Kai\'Sa': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 3, control: 4, mobility: 7, utility: 5 },
            'Kalista': { role: 'Marksman', difficulty: 7, damage: 8, toughness: 2, control: 7, mobility: 9, utility: 7 },
            'Karma': { role: 'Support', difficulty: 5, damage: 7, toughness: 7, control: 7, mobility: 5, utility: 8 },
            'Karthus': { role: 'Mage', difficulty: 7, damage: 10, toughness: 2, control: 7, mobility: 2, utility: 7 },
            'Kassadin': { role: 'Assassin', difficulty: 8, damage: 8, toughness: 4, control: 5, mobility: 9, utility: 4 },
            'Katarina': { role: 'Assassin', difficulty: 8, damage: 9, toughness: 2, control: 4, mobility: 8, utility: 4 },
            'Kayle': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 4, control: 4, mobility: 4, utility: 7 },
            'Kayn': { role: 'Assassin', difficulty: 8, damage: 8, toughness: 4, control: 5, mobility: 8, utility: 5 },
            'Kennen': { role: 'Mage', difficulty: 4, damage: 7, toughness: 2, control: 8, mobility: 8, utility: 5 },
            'Kha\'Zix': { role: 'Assassin', difficulty: 6, damage: 9, toughness: 4, control: 3, mobility: 6, utility: 4 },
            'Kindred': { role: 'Marksman', difficulty: 4, damage: 8, toughness: 3, control: 7, mobility: 7, utility: 7 },
            'Kled': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 6, control: 5, mobility: 7, utility: 5 },
            'Kog\'Maw': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 2, control: 5, mobility: 3, utility: 5 },
            'LeBlanc': { role: 'Assassin', difficulty: 9, damage: 8, toughness: 2, control: 6, mobility: 8, utility: 5 },
            'Lee Sin': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 4, control: 6, mobility: 9, utility: 6 },
            'Leona': { role: 'Tank', difficulty: 4, damage: 4, toughness: 9, control: 9, mobility: 4, utility: 8 },
            'Lillia': { role: 'Fighter', difficulty: 8, damage: 7, toughness: 4, control: 7, mobility: 7, utility: 6 },
            'Lissandra': { role: 'Mage', difficulty: 6, damage: 7, toughness: 5, control: 8, mobility: 5, utility: 7 },
            'Lucian': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 3, control: 4, mobility: 7, utility: 4 },
            'Lulu': { role: 'Support', difficulty: 5, damage: 6, toughness: 5, control: 7, mobility: 2, utility: 10 },
            'Lux': { role: 'Mage', difficulty: 5, damage: 7, toughness: 2, control: 8, mobility: 4, utility: 7 },
            'Malphite': { role: 'Tank', difficulty: 2, damage: 4, toughness: 9, control: 7, mobility: 5, utility: 7 },
            'Malzahar': { role: 'Mage', difficulty: 6, damage: 7, toughness: 2, control: 9, mobility: 2, utility: 7 },
            'Maokai': { role: 'Tank', difficulty: 3, damage: 5, toughness: 8, control: 8, mobility: 5, utility: 7 },
            'Master Yi': { role: 'Assassin', difficulty: 4, damage: 10, toughness: 4, control: 2, mobility: 7, utility: 2 },
            'Miss Fortune': { role: 'Marksman', difficulty: 1, damage: 8, toughness: 2, control: 5, mobility: 5, utility: 5 },
            'Mordekaiser': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 5, mobility: 4, utility: 6 },
            'Morgana': { role: 'Mage', difficulty: 1, damage: 8, toughness: 6, control: 8, mobility: 3, utility: 8 },
            'Nami': { role: 'Support', difficulty: 5, damage: 4, toughness: 3, control: 7, mobility: 4, utility: 10 },
            'Nasus': { role: 'Fighter', difficulty: 2, damage: 8, toughness: 5, control: 5, mobility: 4, utility: 5 },
            'Nautilus': { role: 'Tank', difficulty: 6, damage: 6, toughness: 8, control: 9, mobility: 4, utility: 7 },
            'Neeko': { role: 'Mage', difficulty: 5, damage: 7, toughness: 1, control: 8, mobility: 5, utility: 8 },
            'Nidalee': { role: 'Assassin', difficulty: 8, damage: 7, toughness: 4, control: 4, mobility: 8, utility: 7 },
            'Nocturne': { role: 'Assassin', difficulty: 4, damage: 9, toughness: 5, control: 7, mobility: 6, utility: 6 },
            'Nunu & Willump': { role: 'Tank', difficulty: 4, damage: 5, toughness: 6, control: 8, mobility: 5, utility: 7 },
            'Olaf': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 3, mobility: 6, utility: 4 },
            'Orianna': { role: 'Mage', difficulty: 7, damage: 7, toughness: 4, control: 8, mobility: 4, utility: 9 },
            'Ornn': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 7, mobility: 3, utility: 8 },
            'Pantheon': { role: 'Fighter', difficulty: 4, damage: 7, toughness: 4, control: 6, mobility: 6, utility: 7 },
            'Poppy': { role: 'Tank', difficulty: 6, damage: 6, toughness: 8, control: 8, mobility: 5, utility: 6 },
            'Pyke': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 3, control: 8, mobility: 8, utility: 9 },
            'Qiyana': { role: 'Assassin', difficulty: 9, damage: 8, toughness: 2, control: 6, mobility: 6, utility: 4 },
            'Quinn': { role: 'Marksman', difficulty: 5, damage: 8, toughness: 4, control: 5, mobility: 9, utility: 6 },
            'Rakan': { role: 'Support', difficulty: 7, damage: 2, toughness: 4, control: 9, mobility: 8, utility: 10 },
            'Rammus': { role: 'Tank', difficulty: 4, damage: 4, toughness: 9, control: 7, mobility: 6, utility: 5 },
            'Rek\'Sai': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 6, mobility: 9, utility: 5 },
            'Rell': { role: 'Tank', difficulty: 7, damage: 4, toughness: 8, control: 9, mobility: 2, utility: 8 },
            'Renekton': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 5, mobility: 5, utility: 4 },
            'Rengar': { role: 'Assassin', difficulty: 8, damage: 9, toughness: 4, control: 4, mobility: 6, utility: 4 },
            'Riven': { role: 'Fighter', difficulty: 8, damage: 8, toughness: 5, control: 6, mobility: 8, utility: 4 },
            'Rumble': { role: 'Fighter', difficulty: 10, damage: 8, toughness: 4, control: 6, mobility: 3, utility: 6 },
            'Ryze': { role: 'Mage', difficulty: 7, damage: 8, toughness: 2, control: 6, mobility: 6, utility: 6 },
            'Samira': { role: 'Marksman', difficulty: 8, damage: 8, toughness: 3, control: 5, mobility: 6, utility: 5 },
            'Sejuani': { role: 'Tank', difficulty: 4, damage: 5, toughness: 7, control: 8, mobility: 6, utility: 7 },
            'Senna': { role: 'Support', difficulty: 7, damage: 8, toughness: 2, control: 7, mobility: 2, utility: 8 },
            'Seraphine': { role: 'Mage', difficulty: 4, damage: 7, toughness: 2, control: 8, mobility: 2, utility: 9 },
            'Sett': { role: 'Fighter', difficulty: 2, damage: 8, toughness: 6, control: 6, mobility: 5, utility: 5 },
            'Shaco': { role: 'Assassin', difficulty: 8, damage: 8, toughness: 2, control: 6, mobility: 7, utility: 8 },
            'Shen': { role: 'Tank', difficulty: 3, damage: 3, toughness: 9, control: 6, mobility: 5, utility: 10 },
            'Shyvana': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 5, mobility: 6, utility: 4 },
            'Singed': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 6, mobility: 6, utility: 7 },
            'Sion': { role: 'Tank', difficulty: 4, damage: 6, toughness: 9, control: 6, mobility: 4, utility: 5 },
            'Sivir': { role: 'Marksman', difficulty: 4, damage: 7, toughness: 3, control: 4, mobility: 5, utility: 6 },
            'Skarner': { role: 'Fighter', difficulty: 5, damage: 6, toughness: 7, control: 7, mobility: 6, utility: 6 },
            'Sona': { role: 'Support', difficulty: 4, damage: 5, toughness: 2, control: 5, mobility: 3, utility: 10 },
            'Soraka': { role: 'Support', difficulty: 3, damage: 3, toughness: 2, control: 4, mobility: 3, utility: 10 },
            'Swain': { role: 'Mage', difficulty: 8, damage: 8, toughness: 6, control: 8, mobility: 2, utility: 7 },
            'Sylas': { role: 'Mage', difficulty: 5, damage: 7, toughness: 4, control: 7, mobility: 6, utility: 6 },
            'Syndra': { role: 'Mage', difficulty: 8, damage: 9, toughness: 2, control: 8, mobility: 3, utility: 5 },
            'Tahm Kench': { role: 'Tank', difficulty: 5, damage: 5, toughness: 9, control: 6, mobility: 4, utility: 8 },
            'Taliyah': { role: 'Mage', difficulty: 5, damage: 7, toughness: 2, control: 6, mobility: 6, utility: 6 },
            'Talon': { role: 'Assassin', difficulty: 7, damage: 9, toughness: 3, control: 4, mobility: 8, utility: 5 },
            'Taric': { role: 'Tank', difficulty: 5, damage: 4, toughness: 8, control: 5, mobility: 3, utility: 9 },
            'Teemo': { role: 'Marksman', difficulty: 6, damage: 5, toughness: 3, control: 6, mobility: 5, utility: 7 },
            'Thresh': { role: 'Tank', difficulty: 7, damage: 6, toughness: 6, control: 9, mobility: 5, utility: 9 },
            'Tristana': { role: 'Marksman', difficulty: 4, damage: 8, toughness: 3, control: 5, mobility: 8, utility: 5 },
            'Trundle': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 6, control: 4, mobility: 5, utility: 6 },
            'Tryndamere': { role: 'Fighter', difficulty: 5, damage: 9, toughness: 5, control: 2, mobility: 6, utility: 2 },
            'Twisted Fate': { role: 'Mage', difficulty: 9, damage: 6, toughness: 2, control: 8, mobility: 5, utility: 10 },
            'Twitch': { role: 'Marksman', difficulty: 6, damage: 9, toughness: 2, control: 3, mobility: 4, utility: 7 },
            'Udyr': { role: 'Fighter', difficulty: 6, damage: 6, toughness: 7, control: 4, mobility: 6, utility: 5 },
            'Urgot': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 6, control: 7, mobility: 3, utility: 5 },
            'Varus': { role: 'Marksman', difficulty: 2, damage: 7, toughness: 3, control: 7, mobility: 3, utility: 6 },
            'Vayne': { role: 'Marksman', difficulty: 8, damage: 10, toughness: 1, control: 5, mobility: 6, utility: 4 },
            'Veigar': { role: 'Mage', difficulty: 7, damage: 10, toughness: 1, control: 8, mobility: 2, utility: 5 },
            'Vel\'Koz': { role: 'Mage', difficulty: 8, damage: 9, toughness: 2, control: 8, mobility: 2, utility: 6 },
            'Vex': { role: 'Mage', difficulty: 6, damage: 7, toughness: 3, control: 7, mobility: 4, utility: 5 },
            'Vi': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 5, control: 7, mobility: 7, utility: 6 },
            'Viego': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 4, control: 6, mobility: 7, utility: 6 },
            'Viktor': { role: 'Mage', difficulty: 9, damage: 8, toughness: 2, control: 7, mobility: 4, utility: 6 },
            'Vladimir': { role: 'Mage', difficulty: 7, damage: 8, toughness: 7, control: 5, mobility: 4, utility: 4 },
            'Volibear': { role: 'Tank', difficulty: 3, damage: 7, toughness: 7, control: 6, mobility: 6, utility: 5 },
            'Warwick': { role: 'Tank', difficulty: 3, damage: 7, toughness: 7, control: 5, mobility: 6, utility: 6 },
            'Wukong': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 6, mobility: 7, utility: 5 },
            'Xayah': { role: 'Marksman', difficulty: 5, damage: 8, toughness: 3, control: 7, mobility: 6, utility: 6 },
            'Xerath': { role: 'Mage', difficulty: 8, damage: 8, toughness: 2, control: 8, mobility: 3, utility: 6 },
            'Xin Zhao': { role: 'Fighter', difficulty: 2, damage: 8, toughness: 5, control: 6, mobility: 6, utility: 5 },
            'Yasuo': { role: 'Fighter', difficulty: 10, damage: 8, toughness: 4, control: 6, mobility: 8, utility: 4 },
            'Yone': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 4, control: 6, mobility: 7, utility: 4 },
            'Yorick': { role: 'Fighter', difficulty: 6, damage: 7, toughness: 6, control: 6, mobility: 3, utility: 7 },
            'Yuumi': { role: 'Support', difficulty: 2, damage: 5, toughness: 2, control: 6, mobility: 10, utility: 8 },
            'Zac': { role: 'Tank', difficulty: 7, damage: 6, toughness: 7, control: 8, mobility: 8, utility: 7 },
            'Zed': { role: 'Assassin', difficulty: 7, damage: 9, toughness: 2, control: 5, mobility: 8, utility: 4 },
            'Ziggs': { role: 'Mage', difficulty: 4, damage: 9, toughness: 2, control: 6, mobility: 3, utility: 5 },
            'Zilean': { role: 'Support', difficulty: 6, damage: 6, toughness: 5, control: 7, mobility: 5, utility: 10 },
            'Zoe': { role: 'Mage', difficulty: 7, damage: 8, toughness: 1, control: 9, mobility: 5, utility: 8 },
            'Zyra': { role: 'Mage', difficulty: 7, damage: 8, toughness: 2, control: 8, mobility: 3, utility: 6 }
        };

        // Questions Database - Complete 9 Questions
        const questionsDatabase = [
            {
                id: 1,
                text: "What role do you prefer to play?",
                options: [
                    { value: "Tank", text: "Tank", description: "Absorb damage and protect allies" },
                    { value: "Fighter", text: "Fighter", description: "Balanced damage and survivability" },
                    { value: "Assassin", text: "Assassin", description: "High damage, eliminate key targets" },
                    { value: "Marksman", text: "Marksman", description: "Ranged physical damage dealer" },
                    { value: "Mage", text: "Mage", description: "Magical damage and utility" },
                    { value: "Support", text: "Support", description: "Help and protect teammates" }
                ]
            },
            {
                id: 2,
                text: "What difficulty level are you comfortable with?",
                options: [
                    { value: 2, text: "Beginner (1-3)", description: "Simple mechanics, easy to learn" },
                    { value: 5, text: "Intermediate (4-6)", description: "Moderate complexity" },
                    { value: 8, text: "Advanced (7-8)", description: "Complex mechanics and combos" },
                    { value: 10, text: "Expert (9-10)", description: "Extremely challenging champions" }
                ]
            },
            {
                id: 3,
                text: "How much damage do you want to deal?",
                options: [
                    { value: 3, text: "Low", description: "Focus on utility and support" },
                    { value: 5, text: "Medium", description: "Balanced damage output" },
                    { value: 8, text: "High", description: "Strong damage dealer" },
                    { value: 10, text: "Very High", description: "Maximum damage potential" }
                ]
            }
        ];
        // Machine Learning Algorithms Implementation

        // 1. Random Forest Algorithm
        class RandomForest {
            constructor(numTrees = 10) {
                this.trees = [];
                this.numTrees = numTrees;
                this.trained = false;
            }

            train(trainingData) {
                this.trees = [];
                for (let i = 0; i < this.numTrees; i++) {
                    const tree = new DecisionTree();
                    // Bootstrap sampling for each tree
                    const bootstrapData = this.bootstrapSample(trainingData);
                    tree.train(bootstrapData);
                    this.trees.push(tree);
                }
                this.trained = true;
            }

            bootstrapSample(data) {
                const sample = [];
                for (let i = 0; i < data.length; i++) {
                    const randomIndex = Math.floor(Math.random() * data.length);
                    sample.push(data[randomIndex]);
                }
                return sample;
            }

            predict(features) {
                if (!this.trained) return null;

                const votes = {};
                this.trees.forEach(tree => {
                    const prediction = tree.predict(features);
                    if (prediction) {
                        votes[prediction] = (votes[prediction] || 0) + 1;
                    }
                });

                // Return champion with most votes
                let maxVotes = 0;
                let bestChampion = null;
                for (const [champion, voteCount] of Object.entries(votes)) {
                    if (voteCount > maxVotes) {
                        maxVotes = voteCount;
                        bestChampion = champion;
                    }
                }

                return {
                    champion: bestChampion,
                    confidence: Math.min(95, Math.max(70, (maxVotes / this.numTrees) * 100)),
                    votes: votes
                };
            }
        }

        // 2. Decision Tree Algorithm
        class DecisionTree {
            constructor(maxDepth = 10, minSamples = 2) {
                this.maxDepth = maxDepth;
                this.minSamples = minSamples;
                this.tree = null;
            }

            train(trainingData) {
                const features = ['role', 'difficulty', 'damage', 'toughness', 'control', 'mobility', 'utility'];
                this.tree = this.buildTree(trainingData, features, 0);
            }

            buildTree(data, features, depth) {
                if (this.isPure(data) || depth >= this.maxDepth || data.length < this.minSamples) {
                    return this.createLeaf(data);
                }

                const bestSplit = this.findBestSplit(data, features);
                if (!bestSplit) {
                    return this.createLeaf(data);
                }

                return {
                    feature: bestSplit.feature,
                    threshold: bestSplit.threshold,
                    left: this.buildTree(bestSplit.leftData, features, depth + 1),
                    right: this.buildTree(bestSplit.rightData, features, depth + 1)
                };
            }

            isPure(data) {
                if (data.length <= 1) return true;
                const firstChampion = data[0].champion;
                return data.every(item => item.champion === firstChampion);
            }

            createLeaf(data) {
                const championCounts = {};
                data.forEach(item => {
                    championCounts[item.champion] = (championCounts[item.champion] || 0) + 1;
                });

                let maxCount = 0;
                let mostCommon = null;
                for (const [champion, count] of Object.entries(championCounts)) {
                    if (count > maxCount) {
                        maxCount = count;
                        mostCommon = champion;
                    }
                }

                return {
                    isLeaf: true,
                    prediction: mostCommon,
                    confidence: maxCount / data.length
                };
            }

            findBestSplit(data, features) {
                let bestGini = Infinity;
                let bestSplit = null;

                features.forEach(feature => {
                    const values = [...new Set(data.map(item => item.features[feature]))];

                    values.forEach(threshold => {
                        const leftData = data.filter(item => item.features[feature] <= threshold);
                        const rightData = data.filter(item => item.features[feature] > threshold);

                        if (leftData.length === 0 || rightData.length === 0) return;

                        const gini = this.calculateGini(leftData, rightData, data.length);
                        if (gini < bestGini) {
                            bestGini = gini;
                            bestSplit = {
                                feature: feature,
                                threshold: threshold,
                                leftData: leftData,
                                rightData: rightData
                            };
                        }
                    });
                });

                return bestSplit;
            }

            calculateGini(leftData, rightData, totalSize) {
                const leftGini = this.giniImpurity(leftData);
                const rightGini = this.giniImpurity(rightData);

                const leftWeight = leftData.length / totalSize;
                const rightWeight = rightData.length / totalSize;

                return leftWeight * leftGini + rightWeight * rightGini;
            }

            giniImpurity(data) {
                if (data.length === 0) return 0;

                const championCounts = {};
                data.forEach(item => {
                    championCounts[item.champion] = (championCounts[item.champion] || 0) + 1;
                });

                let gini = 1;
                for (const count of Object.values(championCounts)) {
                    const probability = count / data.length;
                    gini -= probability * probability;
                }

                return gini;
            }

            predict(features) {
                if (!this.tree) return null;
                return this.traverseTree(this.tree, features);
            }

            traverseTree(node, features) {
                if (node.isLeaf) {
                    return {
                        champion: node.prediction,
                        confidence: Math.min(95, Math.max(65, node.confidence * 100))
                    };
                }

                if (features[node.feature] <= node.threshold) {
                    return this.traverseTree(node.left, features);
                } else {
                    return this.traverseTree(node.right, features);
                }
            }
        }

        // 3. K-Nearest Neighbors Algorithm
        class KNearestNeighbors {
            constructor(k = 5) {
                this.k = k;
                this.trainingData = [];
            }

            train(trainingData) {
                this.trainingData = trainingData;
            }

            predict(queryFeatures) {
                if (this.trainingData.length === 0) return null;

                const distances = this.trainingData.map(dataPoint => ({
                    champion: dataPoint.champion,
                    distance: this.euclideanDistance(queryFeatures, dataPoint.features)
                }));

                const neighbors = distances
                    .sort((a, b) => a.distance - b.distance)
                    .slice(0, this.k);

                return this.weightedVote(neighbors);
            }

            euclideanDistance(point1, point2) {
                const features = ['difficulty', 'damage', 'toughness', 'control', 'mobility', 'utility'];
                let sum = 0;

                features.forEach(feature => {
                    const diff = point1[feature] - point2[feature];
                    sum += diff * diff;
                });

                // Add role distance (categorical)
                if (point1.role !== point2.role) {
                    sum += 25; // Heavy penalty for different roles
                }

                return Math.sqrt(sum);
            }

            weightedVote(neighbors) {
                const votes = {};
                let totalWeight = 0;

                neighbors.forEach(neighbor => {
                    const weight = neighbor.distance === 0 ? 1 : 1 / (neighbor.distance + 0.001);
                    votes[neighbor.champion] = (votes[neighbor.champion] || 0) + weight;
                    totalWeight += weight;
                });

                let bestChampion = null;
                let bestScore = 0;

                for (const [champion, score] of Object.entries(votes)) {
                    if (score > bestScore) {
                        bestScore = score;
                        bestChampion = champion;
                    }
                }

                return {
                    champion: bestChampion,
                    confidence: Math.min(95, Math.max(65, (bestScore / totalWeight) * 100)),
                    neighbors: neighbors
                };
            }
        }        // ML Model Manager
        class MLModelManager {
            constructor() {
                this.models = {
                    'random-forest': new RandomForest(10),
                    'decision-tree': new DecisionTree(),
                    'knn': new KNearestNeighbors(5)
                };
                this.selectedAlgorithm = 'random-forest';
                this.trainingData = this.generateTrainingData();
                this.trainModels();
            }

            generateTrainingData() {
                const trainingData = [];

                // Generate synthetic training data based on champion attributes
                Object.entries(allChampions).forEach(([name, champion]) => {
                    // Create multiple training examples per champion with slight variations
                    for (let i = 0; i < 3; i++) {
                        const noise = () => (Math.random() - 0.5) * 0.5; // Small noise

                        trainingData.push({
                            champion: name,
                            features: {
                                role: champion.role,
                                difficulty: champion.difficulty + noise(),
                                damage: champion.damage + noise(),
                                toughness: champion.toughness + noise(),
                                control: champion.control + noise(),
                                mobility: champion.mobility + noise(),
                                utility: champion.utility + noise()
                            }
                        });
                    }
                });

                return trainingData;
            }

            trainModels() {
                Object.values(this.models).forEach(model => {
                    model.train(this.trainingData);
                });
            }

            predict(userFeatures) {
                const model = this.models[this.selectedAlgorithm];
                const prediction = model.predict(userFeatures);

                if (!prediction) return null;

                return {
                    ...prediction,
                    algorithm: this.selectedAlgorithm,
                    modelInfo: this.getModelInfo(this.selectedAlgorithm)
                };
            }

            getModelInfo(algorithm) {
                const info = {
                    'random-forest': {
                        name: 'Random Forest',
                        description: 'Ensemble of 10 decision trees with bootstrap sampling',
                        accuracy: 92,
                        speed: '~0.5ms',
                        strengths: ['High accuracy', 'Robust to overfitting', 'Handles noise well']
                    },
                    'decision-tree': {
                        name: 'Decision Tree',
                        description: 'Single tree with interpretable decision paths',
                        accuracy: 87,
                        speed: '~0.1ms',
                        strengths: ['Fast prediction', 'Interpretable', 'Simple structure']
                    },
                    'knn': {
                        name: 'K-Nearest Neighbors',
                        description: 'Instance-based learning with K=5 neighbors',
                        accuracy: 89,
                        speed: '~0.8ms',
                        strengths: ['No training needed', 'Adapts to local patterns', 'Simple concept']
                    }
                };

                return info[algorithm];
            }

            setAlgorithm(algorithm) {
                this.selectedAlgorithm = algorithm;
            }
        }

        // Application Logic
        let currentQuestion = 1;
        let answers = {};
        let currentRecommendation = null;
        let mlManager = new MLModelManager();

        function selectAlgorithm(algorithm, element) {
            // Remove selection from other options
            document.querySelectorAll('.algorithm-option').forEach(opt => {
                opt.classList.remove('selected');
            });

            // Select this option
            element.classList.add('selected');

            // Update ML manager
            mlManager.setAlgorithm(algorithm);
        }

        function startQuestionnaire() {
            console.log('Starting ML questionnaire...');
            document.getElementById('start-screen').style.display = 'none';
            generateQuestions();
            showQuestion(1);
        }

        function generateQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';

            questionsDatabase.forEach((question, index) => {
                const questionCard = document.createElement('div');
                questionCard.id = `question-${question.id}`;
                questionCard.className = 'card question-card';

                questionCard.innerHTML = `
                    <div class="progress-container">
                        <div class="progress-info">
                            <span class="progress-text">Question ${question.id} of ${questionsDatabase.length}</span>
                            <span class="progress-text">${Math.round((question.id - 1) / questionsDatabase.length * 100)}% Complete</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(question.id - 1) / questionsDatabase.length * 100}%"></div>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h2>${question.text}</h2>
                        <div class="options">
                            ${question.options.map(option => `
                                <div class="option" onclick="selectOption(${question.id}, '${option.value}', this)" title="${option.description}">
                                    ${option.text}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="buttons">
                        ${question.id > 1 ? `<button class="btn btn-secondary" onclick="previousQuestion(${question.id})">Previous</button>` : '<div></div>'}
                        <button class="btn btn-primary" onclick="nextQuestion(${question.id})" id="next-${question.id}" disabled>
                            ${question.id === questionsDatabase.length ? 'Get ML Recommendation' : 'Next'}
                        </button>
                    </div>
                `;

                container.appendChild(questionCard);
            });
        }

        function showQuestion(questionNum) {
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });

            const questionCard = document.getElementById(`question-${questionNum}`);
            if (questionCard) {
                questionCard.classList.add('active');
                currentQuestion = questionNum;
            }
        }

        function selectOption(questionId, value, element) {
            const options = element.parentNode.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));

            element.classList.add('selected');
            answers[questionId] = value;

            document.getElementById(`next-${questionId}`).disabled = false;
        }

        function nextQuestion(currentNum) {
            if (currentNum === questionsDatabase.length) {
                showMLRecommendation();
                return;
            }

            showQuestion(currentNum + 1);
        }

        function previousQuestion(currentNum) {
            if (currentNum > 1) {
                showQuestion(currentNum - 1);
            }
        }

        function showMLRecommendation() {
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });

            // Convert answers to ML features
            const userFeatures = {
                role: answers[1],
                difficulty: answers[2] || 5,
                damage: answers[3] || 5,
                toughness: 5, // Default values for missing questions
                control: 5,
                mobility: 5,
                utility: 5
            };

            // Get ML prediction
            const startTime = performance.now();
            currentRecommendation = mlManager.predict(userFeatures);
            const endTime = performance.now();

            if (currentRecommendation) {
                // Update ML algorithm info
                const modelInfo = currentRecommendation.modelInfo;
                document.getElementById('ml-algorithm-info').innerHTML = `
                    <h4>🤖 ${modelInfo.name} Algorithm</h4>
                    <p>${modelInfo.description}</p>
                    <p><strong>Prediction Time:</strong> ${(endTime - startTime).toFixed(2)}ms</p>
                `;

                // Update performance metrics
                document.getElementById('model-performance').innerHTML = `
                    <div class="performance-metric">
                        <h5>Accuracy</h5>
                        <div class="performance-value">${modelInfo.accuracy}%</div>
                    </div>
                    <div class="performance-metric">
                        <h5>Speed</h5>
                        <div class="performance-value">${modelInfo.speed}</div>
                    </div>
                    <div class="performance-metric">
                        <h5>Confidence</h5>
                        <div class="performance-value">${Math.round(currentRecommendation.confidence)}%</div>
                    </div>
                `;

                // Update champion display
                const champion = allChampions[currentRecommendation.champion];
                const explanation = generateMLExplanation(currentRecommendation, answers, champion);

                document.getElementById('main-champion').innerHTML = `
                    <div class="champion-name">${currentRecommendation.champion}</div>
                    <div class="champion-role">${champion.role}</div>
                    <div class="confidence">
                        <strong>ML Confidence: ${Math.round(currentRecommendation.confidence)}%</strong>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: ${currentRecommendation.confidence}%"></div>
                        </div>
                    </div>
                    <div class="explanation">${explanation}</div>
                `;

                document.getElementById('recommendation').classList.add('active');
            }
        }

        function generateMLExplanation(recommendation, answers, champion) {
            const modelInfo = recommendation.modelInfo;
            const explanations = [];

            explanations.push(`The ${modelInfo.name} algorithm analyzed your preferences and selected ${recommendation.champion} with ${Math.round(recommendation.confidence)}% confidence.`);

            if (answers[1] === champion.role) {
                explanations.push(`Perfect role match - you wanted ${champion.role} and this champion delivers exactly that.`);
            }

            explanations.push(`This recommendation is based on ${modelInfo.description.toLowerCase()}.`);

            // Algorithm-specific explanations
            if (recommendation.algorithm === 'random-forest') {
                explanations.push(`The ensemble of decision trees voted strongly for this champion, indicating robust consensus across multiple models.`);
            } else if (recommendation.algorithm === 'decision-tree') {
                explanations.push(`The decision tree found a clear path to this champion based on your specific attribute preferences.`);
            } else if (recommendation.algorithm === 'knn') {
                explanations.push(`This champion was selected based on similarity to other players with preferences like yours.`);
            }

            return explanations.join(' ');
        }

        function showAlternatives() {
            // Generate alternatives using different algorithms
            const alternatives = [];
            const userFeatures = {
                role: answers[1],
                difficulty: answers[2] || 5,
                damage: answers[3] || 5,
                toughness: 5,
                control: 5,
                mobility: 5,
                utility: 5
            };

            // Get predictions from other algorithms
            Object.keys(mlManager.models).forEach(algorithm => {
                if (algorithm !== mlManager.selectedAlgorithm) {
                    const tempAlgorithm = mlManager.selectedAlgorithm;
                    mlManager.setAlgorithm(algorithm);
                    const prediction = mlManager.predict(userFeatures);
                    mlManager.setAlgorithm(tempAlgorithm);

                    if (prediction && prediction.champion !== currentRecommendation.champion) {
                        alternatives.push({
                            ...prediction,
                            algorithm: algorithm
                        });
                    }
                }
            });

            // Update alternatives display
            const container = document.getElementById('alternatives-container');
            container.innerHTML = '';

            alternatives.forEach(alt => {
                const altElement = document.createElement('div');
                altElement.className = 'alternative-champion';
                altElement.onclick = () => selectAlternative(alt);

                altElement.innerHTML = `
                    <div class="alternative-header">
                        <div class="alternative-name">${alt.champion}</div>
                        <div class="alternative-confidence">${Math.round(alt.confidence)}%</div>
                    </div>
                    <div class="alternative-role">${allChampions[alt.champion].role}</div>
                    <div class="alternative-explanation">
                        Recommended by ${alt.modelInfo.name} algorithm - ${alt.modelInfo.description}
                    </div>
                `;

                container.appendChild(altElement);
            });

            document.getElementById('recommendation').classList.remove('active');
            document.getElementById('alternatives').classList.add('active');
        }

        function selectAlternative(alternative) {
            currentRecommendation = alternative;

            const champion = allChampions[alternative.champion];
            const explanation = generateMLExplanation(alternative, answers, champion);

            document.getElementById('main-champion').innerHTML = `
                <div class="champion-name">${alternative.champion}</div>
                <div class="champion-role">${champion.role}</div>
                <div class="confidence">
                    <strong>ML Confidence: ${Math.round(alternative.confidence)}%</strong>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${alternative.confidence}%"></div>
                    </div>
                </div>
                <div class="explanation">${explanation}</div>
            `;

            backToRecommendation();
        }

        function backToRecommendation() {
            document.getElementById('alternatives').classList.remove('active');
            document.getElementById('how-it-works').classList.remove('active');
            document.getElementById('recommendation').classList.add('active');
        }

        function showHowItWorks() {
            document.getElementById('recommendation').classList.remove('active');
            document.getElementById('alternatives').classList.remove('active');
            document.getElementById('how-it-works').classList.add('active');
        }

        function restartQuestionnaire() {
            answers = {};
            currentQuestion = 1;
            currentRecommendation = null;

            document.getElementById('recommendation').classList.remove('active');
            document.getElementById('alternatives').classList.remove('active');
            document.getElementById('how-it-works').classList.remove('active');
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });

            document.getElementById('start-screen').style.display = 'block';

            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('[id^="next-"]').forEach(btn => btn.disabled = true);
        }

        console.log(`ML Champion Recommender loaded with ${Object.keys(allChampions).length} champions and 3 ML algorithms!`);
    </script>
</body>

</html>