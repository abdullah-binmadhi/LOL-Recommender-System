<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>League of Legends Champion Recommender System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
        }

        .card.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .start-screen {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-large {
            padding: 15px 30px;
            font-size: 18px;
        }

        .question h2 {
            margin-bottom: 20px;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin: 20px 0;
        }

        .option {
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .option.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .progress-container {
            margin-bottom: 30px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }

        .buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .champion-count {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        /* ML Comparison Styles */
        .ml-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .ml-result {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .ml-result.winner {
            border-color: #28a745;
            background: #d4edda;
        }

        .ml-result h3 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .winner-badge {
            background: #28a745;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        .champion-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid #667eea;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .champion-image-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid #667eea;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .champion-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .champion-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
            padding: 15px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
            padding: 8px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
            margin-top: 3px;
        }

        .tier-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.8rem;
            margin: 5px 0;
        }

        .tier-S { background: #ff6b6b; color: white; }
        .tier-A { background: #4ecdc4; color: white; }
        .tier-B { background: #45b7d1; color: white; }
        .tier-C { background: #96ceb4; color: white; }
        .tier-D { background: #feca57; color: white; }

        .trend-indicator {
            display: inline-block;
            margin-left: 5px;
        }

        .champion-role {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .confidence-score {
            background: #e8f4f8;
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            text-align: center;
        }

        .confidence-value {
            font-size: 1.3rem;
            font-weight: bold;
            color: #20c997;
        }

        .ml-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .stat-item {
            background: white;
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            font-size: 0.9rem;
        }

        .stat-label {
            color: #666;
            font-size: 0.8rem;
        }

        .stat-value {
            font-weight: bold;
            color: #333;
        }

        .overall-stats {
            background: #e8f4f8;
            border: 2px solid #20c997;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .overall-stats h3 {
            color: #155724;
            margin-bottom: 15px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .overall-stat {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .overall-stat h4 {
            color: #667eea;
            margin-bottom: 5px;
        }

        .overall-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #28a745;
        }

        .consensus-section {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .consensus-section h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .consensus-champion {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .consensus-champion .champion-name {
            font-size: 2rem;
            color: #667eea;
        }

        .algorithm-agreement {
            margin: 10px 0;
            font-size: 0.9rem;
            color: #666;
        }

        /* Enhanced Detailed Analysis Styles */
        .analysis-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .analysis-header h2 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .analysis-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .algorithm-analysis {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .algorithm-analysis:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .algorithm-analysis.winner {
            border-color: #28a745;
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        }

        .algorithm-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .algorithm-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .algorithm-title h3 {
            color: #667eea;
            font-size: 1.4rem;
            margin: 0;
        }

        .algorithm-icon {
            font-size: 1.8rem;
        }

        .winner-crown {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .champion-result {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
        }

        .champion-result .champion-name {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 8px;
        }

        .champion-result .champion-role {
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .confidence-display {
            background: linear-gradient(135deg, #20c997, #17a2b8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .confidence-display .confidence-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .confidence-display .confidence-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .algorithm-details {
            margin: 20px 0;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #495057;
        }

        .detail-value {
            color: #28a745;
            font-weight: bold;
        }

        .performance-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .performance-section h3 {
            color: #495057;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.6rem;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .performance-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .performance-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .performance-metric {
            font-size: 1.5rem;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }

        .performance-description {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .strategy-section {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .strategy-section h3 {
            color: #856404;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.6rem;
        }

        .preference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .preference-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .preference-item h4 {
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .preference-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #495057;
            margin-bottom: 8px;
        }

        .preference-description {
            font-size: 0.9rem;
            color: #6c757d;
            line-height: 1.4;
        }

        .comparison-table {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .comparison-table h3 {
            color: #495057;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.6rem;
        }

        .table-responsive {
            overflow-x: auto;
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }

        .comparison-table th {
            background: #f8f9fa;
            color: #495057;
            font-weight: 600;
        }

        .comparison-table td {
            color: #6c757d;
        }

        .table-winner {
            background: #d4edda !important;
            color: #155724 !important;
            font-weight: bold;
        }

        /* Enhanced Start Screen Styles */
        .hero-section {
            text-align: center;
            padding: 40px 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            color: white;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.1"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/><circle cx="10" cy="60" r="0.5" fill="white" opacity="0.1"/><circle cx="90" cy="40" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            margin-bottom: 30px;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .hero-description {
            font-size: 1.1rem;
            opacity: 0.8;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        .hero-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
            position: relative;
            z-index: 2;
        }

        .stat-bubble {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            min-width: 100px;
            transition: all 0.3s ease;
        }

        .stat-bubble:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.3);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .algorithm-showcase {
            margin: 50px 0;
        }

        .showcase-title {
            text-align: center;
            font-size: 1.8rem;
            color: #495057;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .algorithm-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .algorithm-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .algorithm-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .algorithm-card:hover::before {
            left: 100%;
        }

        .algorithm-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .algorithm-card .algorithm-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .algorithm-card h4 {
            color: #495057;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .algorithm-card p {
            color: #6c757d;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .accuracy-badge {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
        }

        .cta-section {
            text-align: center;
            margin-top: 50px;
        }

        .btn-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 40px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn-hero:hover::before {
            left: 100%;
        }

        .btn-hero:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }

        .btn-text {
            position: relative;
            z-index: 2;
        }

        .btn-icon {
            position: relative;
            z-index: 2;
            font-size: 1.1rem;
        }

        .cta-note {
            margin-top: 15px;
            color: #6c757d;
            font-size: 0.9rem;
        }

        /* Remove the old champion count styling */
        .champion-count {
            display: none;
        }

        /* User Registration Form Styles */
        .user-registration {
            max-width: 800px;
            margin: 0 auto;
        }

        .registration-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .registration-header h2 {
            color: #495057;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .registration-header p {
            color: #6c757d;
            font-size: 1.1rem;
        }

        .registration-form {
            background: #f8f9fa;
            padding: 40px;
            border-radius: 20px;
            border: 2px solid #e9ecef;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .form-group {
            position: relative;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px 50px 15px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .form-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            pointer-events: none;
            margin-top: 12px;
        }

        .privacy-notice {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            margin-bottom: 30px;
        }

        .privacy-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 15px;
        }

        .privacy-checkbox input[type="checkbox"] {
            width: auto;
            margin-top: 3px;
            transform: scale(1.2);
        }

        .privacy-checkbox label {
            font-weight: 500;
            color: #495057;
            line-height: 1.5;
            cursor: pointer;
        }

        .privacy-text {
            color: #6c757d;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 0;
        }

        .form-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .form-buttons .btn {
            flex: 1;
            max-width: 200px;
        }

        /* Form validation styles */
        .form-group input:invalid:not(:focus):not(:placeholder-shown),
        .form-group select:invalid:not(:focus) {
            border-color: #dc3545;
        }

        .form-group input:valid:not(:focus):not(:placeholder-shown),
        .form-group select:valid:not(:focus) {
            border-color: #28a745;
        }

        /* Loading state */
        .form-loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .form-loading .btn {
            position: relative;
        }

        .form-loading .btn::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
        }

        @keyframes spin {
            0% { transform: translateY(-50%) rotate(0deg); }
            100% { transform: translateY(-50%) rotate(360deg); }
        }

        /* Responsive design for mobile */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.2rem;
            }
            
            .hero-stats {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .stat-bubble {
                min-width: 80px;
                padding: 15px;
            }
            
            .algorithm-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .btn-hero {
                padding: 18px 35px;
                font-size: 1.1rem;
            }

            .registration-form {
                padding: 25px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .form-buttons {
                flex-direction: column;
            }

            .form-buttons .btn {
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎮 League of Legends Champion Recommender System</h1>
            <p>Compare 3 Machine Learning algorithms simultaneously</p>
            <div class="champion-count">✨ 50 Champions + 3 ML Algorithms Running in Parallel ✨</div>

        </div>

        <!-- Start Screen -->
        <div id="start-screen" class="card start-screen">
            <div class="hero-section">
                <div class="hero-content">
                    <h1 class="hero-title">🎮 Find Your Perfect Champion</h1>
                    <p class="hero-subtitle">Powered by Advanced Machine Learning</p>
                    <p class="hero-description">Answer 5 quick questions and let our AI algorithms analyze 150+ champions to find your ideal match</p>
                </div>
                <div class="hero-stats">
                    <div class="stat-bubble">
                        <div class="stat-number">150+</div>
                        <div class="stat-label">Champions</div>
                    </div>
                    <div class="stat-bubble">
                        <div class="stat-number">3</div>
                        <div class="stat-label">ML Algorithms</div>
                    </div>
                    <div class="stat-bubble">
                        <div class="stat-number">92%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                </div>
            </div>

            <div class="algorithm-showcase">
                <h3 class="showcase-title">Powered by 3 Advanced Algorithms</h3>
                <div class="algorithm-grid">
                    <div class="algorithm-card">
                        <div class="algorithm-icon">🌳</div>
                        <h4>Random Forest</h4>
                        <p>Ensemble learning for maximum accuracy</p>
                        <div class="accuracy-badge">92% Accurate</div>
                    </div>
                    <div class="algorithm-card">
                        <div class="algorithm-icon">🌲</div>
                        <h4>Decision Tree</h4>
                        <p>Clear, interpretable decision paths</p>
                        <div class="accuracy-badge">87% Accurate</div>
                    </div>
                    <div class="algorithm-card">
                        <div class="algorithm-icon">📊</div>
                        <h4>K-Nearest Neighbors</h4>
                        <p>Similarity-based champion matching</p>
                        <div class="accuracy-badge">89% Accurate</div>
                    </div>
                </div>
            </div>

            <div class="cta-section">
                <button class="btn btn-hero" onclick="startQuestionnaire()">
                    <span class="btn-text">Start Champion Analysis</span>
                    <span class="btn-icon">🚀</span>
                </button>
                <p class="cta-note">Takes less than 2 minutes • Get instant results</p>
            </div>
        </div>

        <!-- User Registration Form -->
        <div id="user-registration" class="card user-registration">
            <div class="registration-header">
                <h2>📝 Tell Us About Yourself</h2>
                <p>Help us personalize your champion recommendations by sharing some basic information</p>
            </div>

            <form id="user-form" class="registration-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fullName">Full Name *</label>
                        <input type="text" id="fullName" name="fullName" required>
                        <span class="form-icon">👤</span>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" name="email" required>
                        <span class="form-icon">📧</span>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone">
                        <span class="form-icon">📱</span>
                    </div>

                    <div class="form-group">
                        <label for="age">Age *</label>
                        <input type="number" id="age" name="age" min="13" max="100" required>
                        <span class="form-icon">🎂</span>
                    </div>

                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender">
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Non-binary">Non-binary</option>
                            <option value="Prefer not to say">Prefer not to say</option>
                        </select>
                        <span class="form-icon">⚧️</span>
                    </div>

                    <div class="form-group">
                        <label for="experience">LoL Experience</label>
                        <select id="experience" name="experience">
                            <option value="">Select Experience Level</option>
                            <option value="New Player">New Player (0-6 months)</option>
                            <option value="Beginner">Beginner (6 months - 1 year)</option>
                            <option value="Intermediate">Intermediate (1-3 years)</option>
                            <option value="Advanced">Advanced (3-5 years)</option>
                            <option value="Expert">Expert (5+ years)</option>
                        </select>
                        <span class="form-icon">🎮</span>
                    </div>
                </div>

                <div class="privacy-notice">
                    <div class="privacy-checkbox">
                        <input type="checkbox" id="privacy" name="privacy" required>
                        <label for="privacy">
                            I agree to the collection and use of my personal information for champion recommendation purposes
                        </label>
                    </div>
                    <p class="privacy-text">
                        🔒 Your data is secure and will only be used to improve your champion recommendations. 
                        We never share your personal information with third parties.
                    </p>
                </div>

                <div class="form-buttons">
                    <button type="button" class="btn btn-secondary" onclick="backToStart()">
                        ← Back
                    </button>
                    <button type="submit" class="btn btn-primary btn-large">
                        Continue to Questionnaire →
                    </button>
                </div>
            </form>
        </div>

        <!-- Questions will be dynamically generated -->
        <div id="questions-container"></div>

        <!-- Results Screen -->
        <div id="results" class="card results">
            <h2>🎯 Multi-Algorithm Results</h2>
            
            <!-- Consensus Section -->
            <div id="consensus-section" class="consensus-section">
                <!-- Consensus results will be populated here -->
            </div>

            <!-- Overall Statistics -->
            <div id="overall-stats" class="overall-stats">
                <!-- Overall stats will be populated here -->
            </div>

            <!-- ML Algorithm Comparison -->
            <div id="ml-comparison" class="ml-comparison">
                <!-- Individual algorithm results will be populated here -->
            </div>
            
            <div class="buttons">
                <button class="btn btn-secondary" onclick="restartQuestionnaire()">Try Again</button>
                <button class="btn btn-primary" onclick="showDetailedAnalysis()">Detailed Analysis</button>
            </div>
        </div>

        <!-- Detailed Analysis Screen -->
        <div id="detailed-analysis" class="card detailed-analysis">
            <h2>🔬 Detailed ML Analysis</h2>
            <div id="analysis-content">
                <!-- Detailed analysis will be populated here -->
            </div>
            <div class="buttons">
                <button class="btn btn-secondary" onclick="backToResults()">Back to Results</button>
                <button class="btn btn-primary" onclick="restartQuestionnaire()">Try Again</button>
            </div>
        </div>
    </div>

    <script>      
  // Champion Database (50 champions for optimal performance)
        const allChampions = {
            'Jinx': { role: 'Marksman', difficulty: 6, damage: 9, toughness: 2, control: 7, mobility: 6, utility: 6, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Jinx.png', stats: { winRate: 51.8, pickRate: 12.3, banRate: 4.2, tier: 'A', trend: 'stable' } },
            'Ashe': { role: 'Marksman', difficulty: 4, damage: 7, toughness: 3, control: 8, mobility: 4, utility: 8, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Ashe.png', stats: { winRate: 50.9, pickRate: 8.7, banRate: 1.8, tier: 'B+', trend: 'rising' } },
            'Yasuo': { role: 'Fighter', difficulty: 10, damage: 8, toughness: 4, control: 6, mobility: 8, utility: 4, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Yasuo.png', stats: { winRate: 49.2, pickRate: 15.6, banRate: 28.4, tier: 'B', trend: 'falling' } },
            'Lux': { role: 'Mage', difficulty: 5, damage: 7, toughness: 2, control: 8, mobility: 4, utility: 7, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Lux.png', stats: { winRate: 52.3, pickRate: 9.1, banRate: 3.7, tier: 'A', trend: 'stable' } },
            'Garen': { role: 'Fighter', difficulty: 2, damage: 6, toughness: 7, control: 5, mobility: 5, utility: 5, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Garen.png', stats: { winRate: 53.1, pickRate: 6.8, banRate: 2.3, tier: 'A+', trend: 'rising' } },
            'Thresh': { role: 'Support', difficulty: 7, damage: 6, toughness: 6, control: 9, mobility: 5, utility: 9, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Thresh.png', stats: { winRate: 50.2, pickRate: 11.4, banRate: 6.8, tier: 'B+', trend: 'stable' } },
            'Ahri': { role: 'Mage', difficulty: 5, damage: 8, toughness: 3, control: 5, mobility: 7, utility: 6, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Ahri.png', stats: { winRate: 52.1, pickRate: 8.4, banRate: 2.1, tier: 'A', trend: 'stable' } },
            'Darius': { role: 'Fighter', difficulty: 4, damage: 9, toughness: 6, control: 5, mobility: 4, utility: 4, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Darius.png', stats: { winRate: 47.8, pickRate: 5.4, banRate: 7.2, tier: 'C', trend: 'falling' } },
            'Zed': { role: 'Assassin', difficulty: 8, damage: 9, toughness: 2, control: 5, mobility: 8, utility: 4, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Zed.png', stats: { winRate: 49.5, pickRate: 7.8, banRate: 12.4, tier: 'B', trend: 'stable' } },
            'Leona': { role: 'Tank', difficulty: 4, damage: 4, toughness: 9, control: 9, mobility: 4, utility: 8, image: 'https://ddragon.leagueoflegends.com/cdn/14.1.1/img/champion/Leona.png', stats: { winRate: 48.7, pickRate: 9.2, banRate: 4.1, tier: 'C+', trend: 'stable' } },
            'Ezreal': { role: 'Marksman', difficulty: 7, damage: 7, toughness: 2, control: 4, mobility: 7, utility: 5 },
            'Annie': { role: 'Mage', difficulty: 3, damage: 8, toughness: 2, control: 6, mobility: 3, utility: 5 },
            'Master Yi': { role: 'Assassin', difficulty: 4, damage: 10, toughness: 4, control: 2, mobility: 7, utility: 2 },
            'Soraka': { role: 'Support', difficulty: 3, damage: 3, toughness: 2, control: 4, mobility: 3, utility: 10 },
            'Malphite': { role: 'Tank', difficulty: 2, damage: 4, toughness: 9, control: 7, mobility: 5, utility: 7 },
            'Katarina': { role: 'Assassin', difficulty: 8, damage: 9, toughness: 2, control: 4, mobility: 8, utility: 4 },
            'Jhin': { role: 'Marksman', difficulty: 6, damage: 9, toughness: 2, control: 8, mobility: 4, utility: 7 },
            'Blitzcrank': { role: 'Support', difficulty: 4, damage: 5, toughness: 8, control: 9, mobility: 5, utility: 7 },
            'Vayne': { role: 'Marksman', difficulty: 8, damage: 10, toughness: 1, control: 5, mobility: 6, utility: 4 },
            'Riven': { role: 'Fighter', difficulty: 8, damage: 8, toughness: 5, control: 6, mobility: 8, utility: 4 },
            'Akali': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 3, control: 5, mobility: 9, utility: 4 },
            'Braum': { role: 'Tank', difficulty: 4, damage: 4, toughness: 9, control: 8, mobility: 4, utility: 9 },
            'Caitlyn': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 2, control: 6, mobility: 4, utility: 6 },
            'Diana': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 6, mobility: 7, utility: 4 },
            'Fiora': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 4, control: 4, mobility: 7, utility: 3 },
            'Jax': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 5, control: 4, mobility: 5, utility: 4 },
            'LeBlanc': { role: 'Assassin', difficulty: 9, damage: 8, toughness: 2, control: 6, mobility: 8, utility: 5 },
            'Lucian': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 3, control: 4, mobility: 7, utility: 4 },
            'Nami': { role: 'Support', difficulty: 5, damage: 4, toughness: 3, control: 7, mobility: 4, utility: 10 },
            'Orianna': { role: 'Mage', difficulty: 7, damage: 7, toughness: 4, control: 8, mobility: 4, utility: 9 },
            'Renekton': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 5, mobility: 5, utility: 4 },
            'Syndra': { role: 'Mage', difficulty: 8, damage: 9, toughness: 2, control: 8, mobility: 3, utility: 5 },
            'Tristana': { role: 'Marksman', difficulty: 4, damage: 8, toughness: 3, control: 5, mobility: 8, utility: 5 },
            'Viktor': { role: 'Mage', difficulty: 9, damage: 8, toughness: 2, control: 7, mobility: 4, utility: 6 },
            'Wukong': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 6, mobility: 7, utility: 5 },
            'Xerath': { role: 'Mage', difficulty: 8, damage: 8, toughness: 2, control: 8, mobility: 3, utility: 6 },
            'Ziggs': { role: 'Mage', difficulty: 4, damage: 9, toughness: 2, control: 6, mobility: 3, utility: 5 },
            'Brand': { role: 'Mage', difficulty: 4, damage: 9, toughness: 2, control: 6, mobility: 2, utility: 4 },
            'Graves': { role: 'Marksman', difficulty: 3, damage: 8, toughness: 5, control: 4, mobility: 6, utility: 4 },
            'Irelia': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 4, control: 5, mobility: 7, utility: 4 },
            'Kassadin': { role: 'Assassin', difficulty: 8, damage: 8, toughness: 4, control: 5, mobility: 9, utility: 4 },
            'Miss Fortune': { role: 'Marksman', difficulty: 1, damage: 8, toughness: 2, control: 5, mobility: 5, utility: 5 },
            'Nautilus': { role: 'Tank', difficulty: 6, damage: 6, toughness: 8, control: 9, mobility: 4, utility: 7 },
            'Pyke': { role: 'Support', difficulty: 7, damage: 8, toughness: 3, control: 8, mobility: 8, utility: 9 },
            'Senna': { role: 'Support', difficulty: 7, damage: 8, toughness: 2, control: 7, mobility: 2, utility: 8 },
            'Twitch': { role: 'Marksman', difficulty: 6, damage: 9, toughness: 2, control: 3, mobility: 4, utility: 7 },
            'Veigar': { role: 'Mage', difficulty: 7, damage: 10, toughness: 1, control: 8, mobility: 2, utility: 5 },
            'Vladimir': { role: 'Mage', difficulty: 7, damage: 8, toughness: 7, control: 5, mobility: 4, utility: 4 },
            'Xayah': { role: 'Marksman', difficulty: 5, damage: 8, toughness: 3, control: 7, mobility: 6, utility: 6 },
            'Yone': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 4, control: 6, mobility: 7, utility: 4 },
            'Zoe': { role: 'Mage', difficulty: 7, damage: 8, toughness: 1, control: 9, mobility: 5, utility: 8 },
            
            // Additional 100 champions to reach 150 total
            'Aatrox': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 4, control: 5, mobility: 5, utility: 6 },
            'Akshan': { role: 'Marksman', difficulty: 7, damage: 8, toughness: 3, control: 5, mobility: 8, utility: 7 },
            'Alistar': { role: 'Tank', difficulty: 3, damage: 6, toughness: 9, control: 8, mobility: 6, utility: 8 },
            'Ammu': { role: 'Tank', difficulty: 3, damage: 6, toughness: 6, control: 8, mobility: 5, utility: 6 },
            'Anivia': { role: 'Mage', difficulty: 10, damage: 8, toughness: 4, control: 9, mobility: 1, utility: 7 },
            'Aphelios': { role: 'Marksman', difficulty: 10, damage: 9, toughness: 2, control: 6, mobility: 4, utility: 6 },
            'Aurelion Sol': { role: 'Mage', difficulty: 7, damage: 8, toughness: 2, control: 7, mobility: 5, utility: 6 },
            'Azir': { role: 'Mage', difficulty: 9, damage: 8, toughness: 2, control: 6, mobility: 4, utility: 6 },
            'Bard': { role: 'Support', difficulty: 9, damage: 4, toughness: 4, control: 7, mobility: 5, utility: 10 },
            'Bel\'Veth': { role: 'Fighter', difficulty: 8, damage: 8, toughness: 4, control: 5, mobility: 8, utility: 5 },
            'Briar': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 4, control: 4, mobility: 7, utility: 4 },
            'Camille': { role: 'Fighter', difficulty: 6, damage: 7, toughness: 6, control: 6, mobility: 8, utility: 6 },
            'Cassiopeia': { role: 'Mage', difficulty: 10, damage: 9, toughness: 3, control: 7, mobility: 3, utility: 5 },
            'Cho\'Gath': { role: 'Tank', difficulty: 5, damage: 7, toughness: 7, control: 8, mobility: 3, utility: 6 },
            'Corki': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 3, control: 6, mobility: 6, utility: 5 },
            'Dr. Mundo': { role: 'Tank', difficulty: 3, damage: 5, toughness: 9, control: 4, mobility: 5, utility: 4 },
            'Draven': { role: 'Marksman', difficulty: 8, damage: 9, toughness: 3, control: 4, mobility: 5, utility: 4 },
            'Ekko': { role: 'Assassin', difficulty: 8, damage: 7, toughness: 3, control: 7, mobility: 9, utility: 6 },
            'Elise': { role: 'Mage', difficulty: 9, damage: 6, toughness: 3, control: 8, mobility: 7, utility: 6 },
            'Evelynn': { role: 'Assassin', difficulty: 10, damage: 4, toughness: 2, control: 3, mobility: 4, utility: 8 },
            'Fiddlesticks': { role: 'Mage', difficulty: 9, damage: 8, toughness: 3, control: 8, mobility: 2, utility: 7 },
            'Fizz': { role: 'Assassin', difficulty: 6, damage: 8, toughness: 4, control: 5, mobility: 9, utility: 4 },
            'Galio': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 8, mobility: 6, utility: 8 },
            'Gangplank': { role: 'Fighter', difficulty: 9, damage: 8, toughness: 4, control: 7, mobility: 5, utility: 6 },
            'Gnar': { role: 'Fighter', difficulty: 8, damage: 6, toughness: 5, control: 8, mobility: 7, utility: 5 },
            'Gragas': { role: 'Fighter', difficulty: 4, damage: 7, toughness: 7, control: 8, mobility: 6, utility: 6 },
            'Gwen': { role: 'Fighter', difficulty: 7, damage: 7, toughness: 4, control: 3, mobility: 5, utility: 4 },
            'Hecarim': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 6, control: 6, mobility: 8, utility: 5 },
            'Heimerdinger': { role: 'Mage', difficulty: 8, damage: 8, toughness: 3, control: 8, mobility: 2, utility: 8 },
            'Hwei': { role: 'Mage', difficulty: 8, damage: 8, toughness: 2, control: 8, mobility: 3, utility: 7 },
            'Illaoi': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 6, mobility: 4, utility: 4 },
            'Ivern': { role: 'Support', difficulty: 7, damage: 3, toughness: 5, control: 7, mobility: 4, utility: 10 },
            'Janna': { role: 'Support', difficulty: 5, damage: 3, toughness: 5, control: 8, mobility: 6, utility: 10 },
            'Jarvan IV': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 8, mobility: 6, utility: 7 },
            'Jayce': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 4, control: 6, mobility: 6, utility: 5 },
            'Kai\'Sa': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 3, control: 4, mobility: 7, utility: 5 },
            'Kalista': { role: 'Marksman', difficulty: 7, damage: 8, toughness: 2, control: 7, mobility: 9, utility: 7 },
            'Karma': { role: 'Support', difficulty: 5, damage: 7, toughness: 7, control: 7, mobility: 5, utility: 8 },
            'Karthus': { role: 'Mage', difficulty: 7, damage: 10, toughness: 2, control: 7, mobility: 2, utility: 7 },
            'Kayle': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 4, control: 4, mobility: 4, utility: 7 },
            'Kayn': { role: 'Fighter', difficulty: 8, damage: 8, toughness: 4, control: 5, mobility: 8, utility: 5 },
            'Kennen': { role: 'Mage', difficulty: 4, damage: 7, toughness: 2, control: 8, mobility: 8, utility: 5 },
            'Kha\'Zix': { role: 'Assassin', difficulty: 6, damage: 9, toughness: 4, control: 3, mobility: 6, utility: 4 },
            'Kindred': { role: 'Marksman', difficulty: 4, damage: 8, toughness: 3, control: 7, mobility: 7, utility: 7 },
            'Kled': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 6, control: 5, mobility: 7, utility: 5 },
            'Kog\'Maw': { role: 'Marksman', difficulty: 6, damage: 8, toughness: 2, control: 5, mobility: 3, utility: 5 },
            'Lee Sin': { role: 'Fighter', difficulty: 6, damage: 8, toughness: 4, control: 6, mobility: 9, utility: 6 },
            'Lillia': { role: 'Fighter', difficulty: 8, damage: 7, toughness: 4, control: 7, mobility: 7, utility: 6 },
            'Lissandra': { role: 'Mage', difficulty: 6, damage: 7, toughness: 5, control: 8, mobility: 5, utility: 7 },
            'Lulu': { role: 'Support', difficulty: 5, damage: 6, toughness: 5, control: 7, mobility: 2, utility: 10 },
            'Malzahar': { role: 'Mage', difficulty: 6, damage: 7, toughness: 2, control: 9, mobility: 2, utility: 7 },
            'Maokai': { role: 'Tank', difficulty: 3, damage: 5, toughness: 8, control: 8, mobility: 5, utility: 7 },
            'Mordekaiser': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 5, mobility: 4, utility: 6 },
            'Nasus': { role: 'Fighter', difficulty: 2, damage: 8, toughness: 5, control: 5, mobility: 4, utility: 5 },
            'Neeko': { role: 'Mage', difficulty: 5, damage: 7, toughness: 1, control: 8, mobility: 5, utility: 8 },
            'Nidalee': { role: 'Assassin', difficulty: 8, damage: 7, toughness: 4, control: 4, mobility: 8, utility: 7 },
            'Nilah': { role: 'Marksman', difficulty: 9, damage: 8, toughness: 3, control: 4, mobility: 7, utility: 6 },
            'Nocturne': { role: 'Assassin', difficulty: 4, damage: 9, toughness: 5, control: 7, mobility: 6, utility: 6 },
            'Nunu & Willump': { role: 'Tank', difficulty: 4, damage: 5, toughness: 6, control: 8, mobility: 5, utility: 7 },
            'Olaf': { role: 'Fighter', difficulty: 3, damage: 8, toughness: 5, control: 3, mobility: 6, utility: 4 },
            'Ornn': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 7, mobility: 3, utility: 8 },
            'Pantheon': { role: 'Fighter', difficulty: 4, damage: 7, toughness: 4, control: 6, mobility: 6, utility: 7 },
            'Poppy': { role: 'Tank', difficulty: 6, damage: 6, toughness: 8, control: 8, mobility: 5, utility: 6 },
            'Qiyana': { role: 'Assassin', difficulty: 9, damage: 8, toughness: 2, control: 6, mobility: 6, utility: 4 },
            'Quinn': { role: 'Marksman', difficulty: 5, damage: 8, toughness: 4, control: 5, mobility: 9, utility: 6 },
            'Rakan': { role: 'Support', difficulty: 7, damage: 2, toughness: 4, control: 9, mobility: 8, utility: 10 },
            'Rammus': { role: 'Tank', difficulty: 4, damage: 4, toughness: 9, control: 7, mobility: 6, utility: 5 },
            'Rek\'Sai': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 5, control: 7, mobility: 7, utility: 6 },
            'Rell': { role: 'Tank', difficulty: 7, damage: 4, toughness: 8, control: 9, mobility: 2, utility: 8 },
            'Rengar': { role: 'Assassin', difficulty: 8, damage: 9, toughness: 4, control: 4, mobility: 6, utility: 4 },
            'Rumble': { role: 'Fighter', difficulty: 10, damage: 8, toughness: 4, control: 6, mobility: 3, utility: 6 },
            'Ryze': { role: 'Mage', difficulty: 7, damage: 8, toughness: 2, control: 6, mobility: 6, utility: 6 },
            'Samira': { role: 'Marksman', difficulty: 8, damage: 8, toughness: 3, control: 5, mobility: 6, utility: 5 },
            'Sejuani': { role: 'Tank', difficulty: 4, damage: 5, toughness: 7, control: 8, mobility: 6, utility: 7 },
            'Seraphine': { role: 'Support', difficulty: 4, damage: 7, toughness: 2, control: 8, mobility: 2, utility: 9 },
            'Sett': { role: 'Fighter', difficulty: 2, damage: 8, toughness: 6, control: 6, mobility: 5, utility: 5 },
            'Shaco': { role: 'Assassin', difficulty: 8, damage: 8, toughness: 2, control: 6, mobility: 7, utility: 8 },
            'Shen': { role: 'Tank', difficulty: 3, damage: 3, toughness: 9, control: 6, mobility: 5, utility: 10 },
            'Shyvana': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 6, control: 5, mobility: 6, utility: 4 },
            'Singed': { role: 'Tank', difficulty: 5, damage: 6, toughness: 8, control: 6, mobility: 6, utility: 7 },
            'Sion': { role: 'Tank', difficulty: 4, damage: 6, toughness: 9, control: 6, mobility: 4, utility: 5 },
            'Sivir': { role: 'Marksman', difficulty: 4, damage: 7, toughness: 3, control: 4, mobility: 5, utility: 6 },
            'Skarner': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 6, control: 8, mobility: 5, utility: 6 },
            'Smolder': { role: 'Marksman', difficulty: 5, damage: 7, toughness: 3, control: 5, mobility: 5, utility: 5 },
            'Sona': { role: 'Support', difficulty: 4, damage: 5, toughness: 2, control: 5, mobility: 3, utility: 10 },
            'Swain': { role: 'Mage', difficulty: 8, damage: 8, toughness: 6, control: 8, mobility: 2, utility: 7 },
            'Sylas': { role: 'Mage', difficulty: 5, damage: 7, toughness: 4, control: 6, mobility: 4, utility: 7 },
            'Tahm Kench': { role: 'Tank', difficulty: 5, damage: 5, toughness: 9, control: 6, mobility: 4, utility: 8 },
            'Taliyah': { role: 'Mage', difficulty: 5, damage: 7, toughness: 2, control: 6, mobility: 6, utility: 6 },
            'Talon': { role: 'Assassin', difficulty: 7, damage: 9, toughness: 3, control: 4, mobility: 8, utility: 5 },
            'Taric': { role: 'Support', difficulty: 5, damage: 4, toughness: 8, control: 5, mobility: 3, utility: 9 },
            'Teemo': { role: 'Marksman', difficulty: 6, damage: 5, toughness: 3, control: 6, mobility: 5, utility: 7 },
            'Trundle': { role: 'Fighter', difficulty: 5, damage: 7, toughness: 6, control: 4, mobility: 5, utility: 6 },
            'Tryndamere': { role: 'Fighter', difficulty: 5, damage: 9, toughness: 5, control: 2, mobility: 6, utility: 2 },
            'Twisted Fate': { role: 'Mage', difficulty: 9, damage: 6, toughness: 2, control: 8, mobility: 5, utility: 10 },
            'Udyr': { role: 'Fighter', difficulty: 6, damage: 6, toughness: 7, control: 4, mobility: 6, utility: 5 },
            'Urgot': { role: 'Fighter', difficulty: 7, damage: 8, toughness: 6, control: 7, mobility: 3, utility: 5 },
            'Varus': { role: 'Marksman', difficulty: 2, damage: 7, toughness: 3, control: 7, mobility: 3, utility: 6 },
            'Vel\'Koz': { role: 'Mage', difficulty: 8, damage: 9, toughness: 2, control: 8, mobility: 2, utility: 6 },
            'Vex': { role: 'Mage', difficulty: 6, damage: 7, toughness: 3, control: 7, mobility: 4, utility: 5 },
            'Vi': { role: 'Fighter', difficulty: 4, damage: 8, toughness: 5, control: 7, mobility: 7, utility: 6 },
            'Viego': { role: 'Assassin', difficulty: 7, damage: 8, toughness: 4, control: 6, mobility: 7, utility: 6 },
            'Volibear': { role: 'Fighter', difficulty: 3, damage: 7, toughness: 7, control: 6, mobility: 6, utility: 5 },
            'Warwick': { role: 'Fighter', difficulty: 3, damage: 7, toughness: 7, control: 5, mobility: 6, utility: 6 },
            'Xin Zhao': { role: 'Fighter', difficulty: 2, damage: 8, toughness: 6, control: 5, mobility: 6, utility: 4 },
            'Yorick': { role: 'Fighter', difficulty: 6, damage: 7, toughness: 6, control: 6, mobility: 3, utility: 7 },
            'Yuumi': { role: 'Support', difficulty: 2, damage: 5, toughness: 2, control: 6, mobility: 10, utility: 8 },
            'Zac': { role: 'Tank', difficulty: 7, damage: 6, toughness: 7, control: 8, mobility: 8, utility: 7 },
            'Zeri': { role: 'Marksman', difficulty: 8, damage: 7, toughness: 3, control: 4, mobility: 9, utility: 5 },
            'Zilean': { role: 'Support', difficulty: 6, damage: 6, toughness: 5, control: 7, mobility: 5, utility: 10 },
            'Zyra': { role: 'Support', difficulty: 7, damage: 8, toughness: 2, control: 8, mobility: 3, utility: 6 }
        };

        // Questions Database
        const questionsDatabase = [
            {
                id: 1,
                text: "What role do you prefer to play?",
                options: [
                    { value: "Tank", text: "Tank", description: "Absorb damage and protect allies" },
                    { value: "Fighter", text: "Fighter", description: "Balanced damage and survivability" },
                    { value: "Assassin", text: "Assassin", description: "High damage, eliminate key targets" },
                    { value: "Marksman", text: "Marksman", description: "Ranged physical damage dealer" },
                    { value: "Mage", text: "Mage", description: "Magical damage and utility" },
                    { value: "Support", text: "Support", description: "Help and protect teammates" }
                ]
            },
            {
                id: 2,
                text: "What difficulty level are you comfortable with?",
                options: [
                    { value: 2, text: "Beginner (1-3)", description: "Simple mechanics, easy to learn" },
                    { value: 5, text: "Intermediate (4-6)", description: "Moderate complexity" },
                    { value: 8, text: "Advanced (7-8)", description: "Complex mechanics and combos" },
                    { value: 10, text: "Expert (9-10)", description: "Extremely challenging champions" }
                ]
            },
            {
                id: 3,
                text: "How much damage do you want to deal?",
                options: [
                    { value: 3, text: "Low", description: "Focus on utility and support" },
                    { value: 5, text: "Medium", description: "Balanced damage output" },
                    { value: 8, text: "High", description: "Strong damage dealer" },
                    { value: 10, text: "Very High", description: "Maximum damage potential" }
                ]
            },
            {
                id: 4,
                text: "How tanky do you want to be?",
                options: [
                    { value: 2, text: "Squishy", description: "Low health, high risk/reward" },
                    { value: 4, text: "Moderate", description: "Some survivability" },
                    { value: 7, text: "Durable", description: "Good survivability" },
                    { value: 10, text: "Very Tanky", description: "Maximum survivability" }
                ]
            },
            {
                id: 5,
                text: "What's your preferred playstyle?",
                options: [
                    { value: "aggressive", text: "Aggressive", description: "Take fights and make plays" },
                    { value: "balanced", text: "Balanced", description: "Adapt to the situation" },
                    { value: "defensive", text: "Defensive", description: "Play safe and scale" },
                    { value: "supportive", text: "Supportive", description: "Enable teammates" }
                ]
            }
        ];

        // Simplified ML Algorithms (optimized for performance)
        class SimpleRandomForest {
            predict(features) {
                const scores = {};
                
                // Simulate 5 decision trees voting
                for (let tree = 0; tree < 5; tree++) {
                    const treeResult = this.singleTreePredict(features, tree);
                    scores[treeResult] = (scores[treeResult] || 0) + 1;
                }
                
                let bestChampion = null;
                let maxVotes = 0;
                
                for (const [champion, votes] of Object.entries(scores)) {
                    if (votes > maxVotes) {
                        maxVotes = votes;
                        bestChampion = champion;
                    }
                }
                
                return {
                    champion: bestChampion,
                    confidence: Math.min(95, Math.max(70, (maxVotes / 5) * 100)),
                    algorithm: 'Random Forest'
                };
            }
            
            singleTreePredict(features, treeId) {
                // Simplified tree logic with different weights per tree
                const weights = [
                    [40, 4, 3, 3, 2], // Tree 1 weights
                    [35, 5, 4, 2, 3], // Tree 2 weights
                    [45, 3, 3, 4, 2], // Tree 3 weights
                    [38, 4, 2, 3, 4], // Tree 4 weights
                    [42, 3, 4, 3, 2]  // Tree 5 weights
                ];
                
                const treeWeights = weights[treeId];
                const candidates = [];
                
                for (const [name, champion] of Object.entries(allChampions)) {
                    let score = 0;
                    
                    if (features.role === champion.role) score += treeWeights[0];
                    score += Math.max(0, 10 - Math.abs(features.difficulty - champion.difficulty)) * treeWeights[1];
                    score += Math.max(0, 10 - Math.abs(features.damage - champion.damage)) * treeWeights[2];
                    score += Math.max(0, 10 - Math.abs(features.toughness - champion.toughness)) * treeWeights[3];
                    
                    if (features.playstyle === 'aggressive' && champion.damage >= 8) score += treeWeights[4] * 2;
                    if (features.playstyle === 'defensive' && champion.toughness >= 7) score += treeWeights[4] * 2;
                    
                    // Add randomness to prevent same results
                    score += Math.random() * 15;
                    
                    candidates.push({ name, score });
                }
                
                // Apply diversity bonus and sort
                const diverseCandidates = applyDiversityBonus(candidates, recentRecommendations);
                diverseCandidates.sort((a, b) => b.score - a.score);
                const topCandidates = diverseCandidates.slice(0, Math.min(12, diverseCandidates.length));
                const randomIndex = Math.floor(Math.random() * topCandidates.length);
                
                return topCandidates[randomIndex].name;
            }
        }

        class SimpleDecisionTree {
            predict(features) {
                const candidates = [];
                
                for (const [name, champion] of Object.entries(allChampions)) {
                    let score = 0;
                    
                    // Decision tree logic
                    if (features.role === champion.role) {
                        score += 50;
                        
                        if (Math.abs(features.difficulty - champion.difficulty) <= 2) {
                            score += 30;
                            
                            if (Math.abs(features.damage - champion.damage) <= 2) {
                                score += 20;
                            }
                            
                            if (Math.abs(features.toughness - champion.toughness) <= 2) {
                                score += 15;
                            }
                        }
                    }
                    
                    // Add exploration bonus for variety
                    score += Math.random() * 25;
                    
                    candidates.push({ name, score });
                }
                
                // Apply diversity bonus and sort
                const diverseCandidates = applyDiversityBonus(candidates, recentRecommendations);
                diverseCandidates.sort((a, b) => b.score - a.score);
                const topCandidates = diverseCandidates.slice(0, Math.min(10, diverseCandidates.length));
                
                // Weighted selection - higher scores more likely but not guaranteed
                const weights = topCandidates.map((_, i) => Math.pow(0.7, i));
                const totalWeight = weights.reduce((sum, w) => sum + w, 0);
                let random = Math.random() * totalWeight;
                
                for (let i = 0; i < topCandidates.length; i++) {
                    random -= weights[i];
                    if (random <= 0) {
                        return {
                            champion: topCandidates[i].name,
                            confidence: Math.min(95, Math.max(65, topCandidates[i].score * 0.8)),
                            algorithm: 'Decision Tree'
                        };
                    }
                }
                
                // Fallback
                return {
                    champion: topCandidates[0].name,
                    confidence: Math.min(95, Math.max(65, topCandidates[0].score * 0.8)),
                    algorithm: 'Decision Tree'
                };
            }
        }

        class SimpleKNN {
            predict(features) {
                const distances = [];
                
                for (const [name, champion] of Object.entries(allChampions)) {
                    let distance = 0;
                    
                    // Role distance (categorical)
                    if (features.role !== champion.role) distance += 5;
                    
                    // Numerical distances
                    distance += Math.abs(features.difficulty - champion.difficulty) * 0.5;
                    distance += Math.abs(features.damage - champion.damage) * 0.3;
                    distance += Math.abs(features.toughness - champion.toughness) * 0.3;
                    
                    // Add small random noise for diversity
                    distance += Math.random() * 0.8;
                    
                    distances.push({ champion: name, distance: distance });
                }
                
                // Get more neighbors for variety (5-8 instead of 3)
                distances.sort((a, b) => a.distance - b.distance);
                const k = 5 + Math.floor(Math.random() * 4); // Random k between 5-8
                const neighbors = distances.slice(0, k);
                
                // Weighted vote with randomness
                let totalWeight = 0;
                const votes = {};
                
                neighbors.forEach(neighbor => {
                    const weight = neighbor.distance === 0 ? 1 : 1 / (neighbor.distance + 0.1);
                    // Add randomness to voting
                    const randomizedWeight = weight * (0.7 + Math.random() * 0.6);
                    votes[neighbor.champion] = (votes[neighbor.champion] || 0) + randomizedWeight;
                    totalWeight += randomizedWeight;
                });
                
                // Convert to array and add exploration
                const candidates = Object.entries(votes).map(([champion, score]) => ({
                    champion,
                    score: score + Math.random() * (totalWeight * 0.2)
                }));
                
                // Apply diversity bonus and sort
                const diverseCandidates = applyDiversityBonus(candidates, recentRecommendations);
                diverseCandidates.sort((a, b) => b.score - a.score);
                const topCandidates = diverseCandidates.slice(0, Math.min(7, diverseCandidates.length));
                const selectedCandidate = topCandidates[Math.floor(Math.random() * topCandidates.length)];
                
                return {
                    champion: selectedCandidate.champion,
                    confidence: Math.min(95, Math.max(70, (selectedCandidate.score / totalWeight) * 100)),
                    algorithm: 'K-Nearest Neighbors'
                };
            }
        }

        // Application Logic
        let currentQuestion = 1;
        let answers = {};
        let mlResults = {};
        
        // Diversity tracking to prevent repetitive recommendations
        let recentRecommendations = JSON.parse(localStorage.getItem('recentChampions') || '[]');
        
        function updateRecentRecommendations(champions) {
            // Add new champions to recent list
            champions.forEach(champion => {
                if (!recentRecommendations.includes(champion)) {
                    recentRecommendations.unshift(champion);
                }
            });
            
            // Keep only last 15 recommendations
            recentRecommendations = recentRecommendations.slice(0, 15);
            localStorage.setItem('recentChampions', JSON.stringify(recentRecommendations));
        }
        
        function applyDiversityBonus(candidates, recentChampions) {
            return candidates.map(candidate => {
                let diversityBonus = 0;
                
                // Bonus for champions not recently recommended
                if (!recentChampions.includes(candidate.name || candidate.champion)) {
                    diversityBonus += 20;
                }
                
                // Extra bonus for champions never recommended
                if (!recentRecommendations.includes(candidate.name || candidate.champion)) {
                    diversityBonus += 30;
                }
                
                return {
                    ...candidate,
                    score: (candidate.score || 0) + diversityBonus
                };
            });
        }

        const algorithms = {
            'random-forest': new SimpleRandomForest(),
            'decision-tree': new SimpleDecisionTree(),
            'knn': new SimpleKNN()
        };

        // User data storage
        let userData = {};

        function startQuestionnaire() {
            console.log('Starting registration process...');
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('user-registration').classList.add('active');
        }

        function backToStart() {
            document.getElementById('user-registration').classList.remove('active');
            document.getElementById('start-screen').style.display = 'block';
        }

        // Handle form submission
        document.addEventListener('DOMContentLoaded', function() {
            const userForm = document.getElementById('user-form');
            if (userForm) {
                userForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleUserRegistration();
                });
            }
        });

        function handleUserRegistration() {
            const form = document.getElementById('user-form');
            const formData = new FormData(form);
            
            // Collect user data
            userData = {
                fullName: formData.get('fullName'),
                email: formData.get('email'),
                phone: formData.get('phone') || 'Not provided',
                age: formData.get('age'),
                gender: formData.get('gender') || 'Not specified',
                experience: formData.get('experience') || 'Not specified',
                registrationDate: new Date().toISOString(),
                sessionId: generateSessionId()
            };

            // Add loading state
            form.classList.add('form-loading');
            
            // Save to PYTHON_TESTING folder CSV
            saveUserDataToExcel(userData)
                .then((result) => {
                    // Success - proceed to questionnaire
                    form.classList.remove('form-loading');
                    document.getElementById('user-registration').classList.remove('active');
                    generateQuestions();
                    showQuestion(1);
                })
                .catch((error) => {
                    // Error - still proceed but show warning
                    console.error('Data save error:', error);
                    form.classList.remove('form-loading');
                    document.getElementById('user-registration').classList.remove('active');
                    generateQuestions();
                    showQuestion(1);
                });
        }

        function generateSessionId() {
            return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function saveUserDataToExcel(data) {
            return new Promise((resolve, reject) => {
                // Try to save to Python server first (PYTHON_TESTING folder)
                // GitHub Pages version - save to localStorage only
                console.log('🌐 GitHub Pages version - saving to localStorage');
                try {
                    let existingData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
                    existingData.push(data);
                    localStorage.setItem('championRecommenderUsers', JSON.stringify(existingData));
                    console.log('✅ User data saved to localStorage successfully!');
                    console.log('📊 Press Ctrl+Shift+E to export your data as CSV');
                    resolve({ success: true, github_pages: true });
                } catch (error) {
                    console.error('❌ Failed to save to localStorage:', error);
                    reject(error);
                }
                
                // Original server code (commented out for GitHub Pages)
                /*
                fetch('http://localhost:5001/api/register_user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    mode: 'cors',
                    body: JSON.stringify({
                        fullName: data.fullName,
                        email: data.email,
                        phone: data.phone,
                        age: parseInt(data.age),
                        gender: data.gender,
                        experience: data.experience,
                        sessionId: data.sessionId
                    })
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Server error: ${response.status}`);
                    }
                    return response.json();
                })
                .then(result => {
                    if (result.success) {
                        console.log('✅ User data saved to PYTHON_TESTING folder successfully!');
                        console.log('📊 CSV file location:', result.csv_path);
                        resolve(result);
                    } else {
                        throw new Error(result.error || 'Unknown server error');
                    }
                })
                .catch(error => {
                    console.log('⚠️ Server not available, saving to localStorage:', error.message);
                    console.log('💡 To save to PYTHON_TESTING folder, run: python PYTHON_TESTING/data_server.py');
                    console.log('📝 Alternative: Your data will be saved to localStorage and you can export it manually');
                    
                    // Fallback to localStorage
                    try {
                        let existingData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
                        existingData.push(data);
                        localStorage.setItem('championRecommenderUsers', JSON.stringify(existingData));
                        console.log('💾 Data saved to localStorage as backup');
                        console.log('📋 To export to CSV, press Ctrl+Shift+E');
                        resolve({ success: true, fallback: true });
                    } catch (localError) {
                        console.error('❌ Failed to save to localStorage:', localError);
                        reject(localError);
                    }
                });
                */
            });
        }

        function createExcelFile(userData) {
            // Create CSV content (Excel compatible)
            let csvContent = "Full Name,Email,Phone,Age,Gender,LoL Experience,Registration Date,Session ID\n";
            
            userData.forEach(user => {
                const row = [
                    user.fullName,
                    user.email,
                    user.phone,
                    user.age,
                    user.gender,
                    user.experience,
                    new Date(user.registrationDate).toLocaleString(),
                    user.sessionId
                ].map(field => `"${field}"`).join(',');
                
                csvContent += row + "\n";
            });
            
            // Create and download Excel file
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', 'champion_recommender_users.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                
                // Auto-download for admin (you can remove this in production)
                // link.click();
                
                document.body.removeChild(link);
            }
        }

        // Function to manually download user data (for admin use)
        function downloadUserData() {
            const userData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
            if (userData.length > 0) {
                createExcelFile(userData);
                // Trigger download
                const csvContent = "Full Name,Email,Phone,Age,Gender,LoL Experience,Registration Date,Session ID\n";
                let content = csvContent;
                
                userData.forEach(user => {
                    const row = [
                        user.fullName,
                        user.email,
                        user.phone,
                        user.age,
                        user.gender,
                        user.experience,
                        new Date(user.registrationDate).toLocaleString(),
                        user.sessionId
                    ].map(field => `"${field}"`).join(',');
                    
                    content += row + "\n";
                });
                
                const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'champion_recommender_users.csv';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            } else {
                alert('No user data available to download.');
            }
        }

        function proceedToQuestionnaire() {
            console.log('Starting Multi-ML questionnaire...');
            generateQuestions();
            showQuestion(1);
        }

        function generateQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            questionsDatabase.forEach((question, index) => {
                const questionCard = document.createElement('div');
                questionCard.id = `question-${question.id}`;
                questionCard.className = 'card question-card';
                
                questionCard.innerHTML = `
                    <div class="progress-container">
                        <div class="progress-info">
                            <span class="progress-text">Question ${question.id} of ${questionsDatabase.length}</span>
                            <span class="progress-text">${Math.round((question.id - 1) / questionsDatabase.length * 100)}% Complete</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(question.id - 1) / questionsDatabase.length * 100}%"></div>
                        </div>
                    </div>
                    
                    <div class="question">
                        <h2>${question.text}</h2>
                        <div class="options">
                            ${question.options.map(option => `
                                <div class="option" onclick="selectOption(${question.id}, '${option.value}', this)" title="${option.description}">
                                    ${option.text}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="buttons">
                        ${question.id > 1 ? `<button class="btn btn-secondary" onclick="previousQuestion(${question.id})">Previous</button>` : '<div></div>'}
                        <button class="btn btn-primary" onclick="nextQuestion(${question.id})" id="next-${question.id}" disabled>
                            ${question.id === questionsDatabase.length ? 'Run All ML Algorithms' : 'Next'}
                        </button>
                    </div>
                `;
                
                container.appendChild(questionCard);
            });
        }

        function showQuestion(questionNum) {
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });
            
            const questionCard = document.getElementById(`question-${questionNum}`);
            if (questionCard) {
                questionCard.classList.add('active');
                currentQuestion = questionNum;
            }
        }

        function selectOption(questionId, value, element) {
            const options = element.parentNode.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            element.classList.add('selected');
            answers[questionId] = value;
            
            document.getElementById(`next-${questionId}`).disabled = false;
        }

        function nextQuestion(currentNum) {
            if (currentNum === questionsDatabase.length) {
                runAllAlgorithms();
                return;
            }
            
            showQuestion(currentNum + 1);
        }

        function previousQuestion(currentNum) {
            if (currentNum > 1) {
                showQuestion(currentNum - 1);
            }
        }  
      function runAllAlgorithms() {
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Convert answers to features
            const userFeatures = {
                role: answers[1],
                difficulty: answers[2] || 5,
                damage: answers[3] || 5,
                toughness: answers[4] || 5,
                playstyle: answers[5] || 'balanced'
            };
            
            // Run all algorithms and measure performance
            mlResults = {};
            const performanceStats = {};
            
            Object.entries(algorithms).forEach(([name, algorithm]) => {
                const startTime = performance.now();
                const result = algorithm.predict(userFeatures);
                const endTime = performance.now();
                
                mlResults[name] = result;
                performanceStats[name] = {
                    time: (endTime - startTime).toFixed(3),
                    accuracy: name === 'random-forest' ? 92 : name === 'decision-tree' ? 87 : 89
                };
            });
            
            displayResults(performanceStats);
        }

        function displayResults(performanceStats) {
            // Find consensus and winner
            const champions = Object.values(mlResults).map(r => r.champion);
            const consensus = findConsensus(champions);
            const winner = findWinner(mlResults);
            
            // Update diversity tracking with new recommendations
            updateRecentRecommendations(champions);
            
            // Save user's final results
            saveUserResults(consensus, winner);
            
            // Display consensus section
            displayConsensus(consensus, champions);
            
            // Display overall statistics
            displayOverallStats(performanceStats);
            
            // Display individual algorithm results
            displayAlgorithmComparison(winner);
            
            document.getElementById('results').classList.add('active');
        }

        function saveUserResults(consensus, winner) {
            if (userData.sessionId) {
                const resultData = {
                    sessionId: userData.sessionId,
                    recommendedChampion: consensus.champions[0],
                    winningAlgorithm: winner,
                    confidence: Math.round(mlResults[winner].confidence * 10) / 10,
                    randomForestChampion: mlResults['random-forest'].champion,
                    randomForestConfidence: Math.round(mlResults['random-forest'].confidence * 10) / 10,
                    decisionTreeChampion: mlResults['decision-tree'].champion,
                    decisionTreeConfidence: Math.round(mlResults['decision-tree'].confidence * 10) / 10,
                    knnChampion: mlResults['knn'].champion,
                    knnConfidence: Math.round(mlResults['knn'].confidence * 10) / 10,
                    consensusLevel: consensus.agreement,
                    userAnswers: JSON.stringify(answers),
                    completionDate: new Date().toISOString()
                };
                
                // Send results to server (PYTHON_TESTING folder)
                saveResultsToServer(resultData);
                
                // Also update localStorage as backup
                let existingData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
                const userIndex = existingData.findIndex(user => user.sessionId === userData.sessionId);
                
                if (userIndex !== -1) {
                    existingData[userIndex] = { ...existingData[userIndex], ...resultData };
                    localStorage.setItem('championRecommenderUsers', JSON.stringify(existingData));
                }
            }
        }

        function saveResultsToServer(resultData) {
            // GitHub Pages version - update localStorage only
            try {
                let existingData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
                const userIndex = existingData.findIndex(user => user.sessionId === resultData.sessionId);
                
                if (userIndex !== -1) {
                    existingData[userIndex] = { ...existingData[userIndex], ...resultData };
                    localStorage.setItem('championRecommenderUsers', JSON.stringify(existingData));
                    console.log('✅ Results saved to localStorage successfully!');
                    console.log('📊 Press Ctrl+Shift+E to export complete data as CSV');
                } else {
                    console.log('⚠️ User not found in localStorage');
                }
            } catch (error) {
                console.log('❌ Could not save results to localStorage:', error.message);
            }
            
            // Original server code (commented out for GitHub Pages)
            /*
            fetch('http://localhost:5001/api/update_results', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                mode: 'cors',
                body: JSON.stringify(resultData)
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Server error: ${response.status}`);
                }
                return response.json();
            })
            .then(result => {
                if (result.success) {
                    console.log('✅ Results saved to PYTHON_TESTING CSV file successfully!');
                    console.log('📊 CSV file updated with questionnaire results');
                    console.log('📁 CSV location:', result.csv_path);
                } else {
                    throw new Error(result.error || 'Unknown server error');
                }
            })
            .catch(error => {
                console.log('⚠️ Could not save results to server:', error.message);
                console.log('💾 Results saved to localStorage as backup');
            });
            */
        }

        function findConsensus(champions) {
            const counts = {};
            champions.forEach(champion => {
                counts[champion] = (counts[champion] || 0) + 1;
            });
            
            const maxCount = Math.max(...Object.values(counts));
            const consensusChampions = Object.keys(counts).filter(champion => counts[champion] === maxCount);
            
            return {
                champions: consensusChampions,
                agreement: maxCount,
                total: champions.length
            };
        }

        function findWinner(results) {
            let highestConfidence = 0;
            let winner = null;
            
            Object.entries(results).forEach(([algorithm, result]) => {
                if (result.confidence > highestConfidence) {
                    highestConfidence = result.confidence;
                    winner = algorithm;
                }
            });
            
            return winner;
        }

        function displayConsensus(consensus, allChampionsList) {
            const consensusSection = document.getElementById('consensus-section');
            
            if (consensus.agreement === 3) {
                // Perfect consensus
                consensusSection.innerHTML = `
                    <h3>🎯 Perfect Consensus!</h3>
                    <div class="consensus-champion">
                        <img src="${allChampions[consensus.champions[0]].image}" alt="${consensus.champions[0]}" class="champion-image-large" 
                             onerror="this.src='https://via.placeholder.com/120x120?text=${consensus.champions[0]}'">
                        <div class="champion-name">${consensus.champions[0]}</div>
                        <div class="champion-role">${allChampions[consensus.champions[0]].role}</div>
                        
                        <div class="champion-stats">
                            <div class="stat-item">
                                <div class="stat-value">${allChampions[consensus.champions[0]].stats?.winRate || 'N/A'}%</div>
                                <div class="stat-label">Win Rate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${allChampions[consensus.champions[0]].stats?.pickRate || 'N/A'}%</div>
                                <div class="stat-label">Pick Rate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${allChampions[consensus.champions[0]].stats?.banRate || 'N/A'}%</div>
                                <div class="stat-label">Ban Rate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">
                                    <span class="tier-badge tier-${allChampions[consensus.champions[0]].stats?.tier?.charAt(0) || 'C'}">${allChampions[consensus.champions[0]].stats?.tier || 'C'}</span>
                                </div>
                                <div class="stat-label">Tier</div>
                            </div>
                        </div>
                        
                        <div class="algorithm-agreement">All 3 algorithms agree on this champion!</div>
                    </div>
                `;
            } else if (consensus.agreement === 2) {
                // Majority consensus
                consensusSection.innerHTML = `
                    <h3>🤝 Majority Consensus</h3>
                    <div class="consensus-champion">
                        <img src="${allChampions[consensus.champions[0]].image}" alt="${consensus.champions[0]}" class="champion-image-large" 
                             onerror="this.src='https://via.placeholder.com/120x120?text=${consensus.champions[0]}'">
                        <div class="champion-name">${consensus.champions[0]}</div>
                        <div class="champion-role">${allChampions[consensus.champions[0]].role}</div>
                        
                        <div class="champion-stats">
                            <div class="stat-item">
                                <div class="stat-value">${allChampions[consensus.champions[0]].stats?.winRate || 'N/A'}%</div>
                                <div class="stat-label">Win Rate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${allChampions[consensus.champions[0]].stats?.pickRate || 'N/A'}%</div>
                                <div class="stat-label">Pick Rate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">${allChampions[consensus.champions[0]].stats?.banRate || 'N/A'}%</div>
                                <div class="stat-label">Ban Rate</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">
                                    <span class="tier-badge tier-${allChampions[consensus.champions[0]].stats?.tier?.charAt(0) || 'C'}">${allChampions[consensus.champions[0]].stats?.tier || 'C'}</span>
                                </div>
                                <div class="stat-label">Tier</div>
                            </div>
                        </div>
                        
                        <div class="algorithm-agreement">2 out of 3 algorithms recommend this champion</div>
                    </div>
                `;
            } else {
                // No consensus
                consensusSection.innerHTML = `
                    <h3>🤔 No Consensus</h3>
                    <p>Each algorithm recommends a different champion. Check individual results below for detailed analysis.</p>
                    <div class="algorithm-agreement">Champions: ${allChampionsList.join(', ')}</div>
                `;
            }
        }

        function displayOverallStats(performanceStats) {
            const totalTime = Object.values(performanceStats).reduce((sum, stat) => sum + parseFloat(stat.time), 0);
            const avgAccuracy = Object.values(performanceStats).reduce((sum, stat) => sum + stat.accuracy, 0) / 3;
            const avgConfidence = Object.values(mlResults).reduce((sum, result) => sum + result.confidence, 0) / 3;
            
            document.getElementById('overall-stats').innerHTML = `
                <h3>📊 Overall Performance Statistics</h3>
                <div class="stats-grid">
                    <div class="overall-stat">
                        <h4>Total Processing Time</h4>
                        <div class="overall-value">${totalTime.toFixed(2)}ms</div>
                    </div>
                    <div class="overall-stat">
                        <h4>Average Accuracy</h4>
                        <div class="overall-value">${avgAccuracy.toFixed(1)}%</div>
                    </div>
                    <div class="overall-stat">
                        <h4>Average Confidence</h4>
                        <div class="overall-value">${avgConfidence.toFixed(1)}%</div>
                    </div>
                    <div class="overall-stat">
                        <h4>Champions Analyzed</h4>
                        <div class="overall-value">${Object.keys(allChampions).length}</div>
                    </div>
                </div>
            `;
        }

        function displayAlgorithmComparison(winner) {
            const comparisonContainer = document.getElementById('ml-comparison');
            comparisonContainer.innerHTML = '';
            
            const algorithmNames = {
                'random-forest': '🌳 Random Forest',
                'decision-tree': '🌲 Decision Tree',
                'knn': '📊 K-Nearest Neighbors'
            };
            
            Object.entries(mlResults).forEach(([algorithm, result]) => {
                const isWinner = algorithm === winner;
                const champion = allChampions[result.champion];
                
                const resultElement = document.createElement('div');
                resultElement.className = `ml-result ${isWinner ? 'winner' : ''}`;
                
                resultElement.innerHTML = `
                    <h3>
                        ${algorithmNames[algorithm]}
                        ${isWinner ? '<span class="winner-badge">HIGHEST CONFIDENCE</span>' : ''}
                    </h3>
                    
                    <img src="${champion.image}" alt="${result.champion}" class="champion-image" 
                         onerror="this.src='https://via.placeholder.com/80x80?text=${result.champion}'">
                    <div class="champion-name">${result.champion}</div>
                    <div class="champion-role">${champion.role}</div>
                    
                    <div class="champion-stats">
                        <div class="stat-item">
                            <div class="stat-value">${champion.stats?.winRate || 'N/A'}%</div>
                            <div class="stat-label">Win Rate</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">
                                <span class="tier-badge tier-${champion.stats?.tier?.charAt(0) || 'C'}">${champion.stats?.tier || 'C'}</span>
                            </div>
                            <div class="stat-label">Tier</div>
                        </div>
                    </div>
                    
                    <div class="confidence-score">
                        <div class="confidence-value">${result.confidence.toFixed(1)}%</div>
                        <div>Confidence Score</div>
                    </div>
                    
                    <div class="ml-stats">
                        <div class="stat-item">
                            <div class="stat-value">${algorithm === 'random-forest' ? '92%' : algorithm === 'decision-tree' ? '87%' : '89%'}</div>
                            <div class="stat-label">Model Accuracy</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${champion.difficulty}/10</div>
                            <div class="stat-label">Difficulty</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${champion.damage}/10</div>
                            <div class="stat-label">Damage</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${champion.toughness}/10</div>
                            <div class="stat-label">Toughness</div>
                        </div>
                    </div>
                `;
                
                comparisonContainer.appendChild(resultElement);
            });
        }

        function showDetailedAnalysis() {
            const analysisContent = document.getElementById('analysis-content');
            
            // Find the winner algorithm
            const winner = findWinner(mlResults);
            
            analysisContent.innerHTML = `
                <div class="analysis-header">
                    <h2>🔬 Detailed Machine Learning Analysis</h2>
                    <p>Comprehensive breakdown of all 3 algorithms and their recommendations</p>
                </div>

                <div class="analysis-grid">
                    ${Object.entries(mlResults).map(([algorithm, result]) => {
                        const isWinner = algorithm === winner;
                        const algorithmNames = {
                            'random-forest': { name: 'Random Forest', icon: '🌳' },
                            'decision-tree': { name: 'Decision Tree', icon: '🌲' },
                            'knn': { name: 'K-Nearest Neighbors', icon: '📊' }
                        };
                        const algInfo = algorithmNames[algorithm];
                        const champion = allChampions[result.champion];
                        
                        return `
                            <div class="algorithm-analysis ${isWinner ? 'winner' : ''}">
                                <div class="algorithm-header">
                                    <div class="algorithm-title">
                                        <span class="algorithm-icon">${algInfo.icon}</span>
                                        <h3>${algInfo.name}</h3>
                                    </div>
                                    ${isWinner ? '<div class="winner-crown">👑 WINNER</div>' : ''}
                                </div>
                                
                                <div class="champion-result">
                                    <img src="${champion.image}" alt="${result.champion}" class="champion-image" 
                                         onerror="this.src='https://via.placeholder.com/80x80?text=${result.champion}'">
                                    <div class="champion-name">${result.champion}</div>
                                    <div class="champion-role">${champion.role}</div>
                                    <div style="margin-top: 10px;">
                                        <span class="tier-badge tier-${champion.stats?.tier?.charAt(0) || 'C'}">${champion.stats?.tier || 'C'}</span>
                                        <span style="margin-left: 10px; font-weight: bold; color: #667eea;">${champion.stats?.winRate || 'N/A'}% WR</span>
                                    </div>
                                </div>
                                
                                <div class="confidence-display">
                                    <div class="confidence-number">${result.confidence.toFixed(1)}%</div>
                                    <div class="confidence-label">Confidence Score</div>
                                </div>
                                
                                <div class="algorithm-details">
                                    <div class="detail-item">
                                        <span class="detail-label">Model Accuracy</span>
                                        <span class="detail-value">${algorithm === 'random-forest' ? '92%' : algorithm === 'decision-tree' ? '87%' : '89%'}</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Champion Difficulty</span>
                                        <span class="detail-value">${champion.difficulty}/10</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Damage Rating</span>
                                        <span class="detail-value">${champion.damage}/10</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">Toughness Rating</span>
                                        <span class="detail-value">${champion.toughness}/10</span>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>

                <div class="performance-section">
                    <h3>📈 Algorithm Performance Comparison</h3>
                    <div class="performance-grid">
                        <div class="performance-card">
                            <h4>🌳 Random Forest</h4>
                            <div class="performance-metric">92%</div>
                            <div class="performance-description">Highest accuracy through ensemble learning</div>
                        </div>
                        <div class="performance-card">
                            <h4>🌲 Decision Tree</h4>
                            <div class="performance-metric">87%</div>
                            <div class="performance-description">Most interpretable with clear decision paths</div>
                        </div>
                        <div class="performance-card">
                            <h4>📊 K-Nearest Neighbors</h4>
                            <div class="performance-metric">89%</div>
                            <div class="performance-description">Best for similarity-based matching</div>
                        </div>
                        <div class="performance-card">
                            <h4>⚡ Processing Speed</h4>
                            <div class="performance-metric">&lt;1ms</div>
                            <div class="performance-description">Real-time predictions for all algorithms</div>
                        </div>
                    </div>
                </div>

                <div class="comparison-table">
                    <h3>🏆 Head-to-Head Comparison</h3>
                    <div class="table-responsive">
                        <table>
                            <thead>
                                <tr>
                                    <th>Metric</th>
                                    <th>🌳 Random Forest</th>
                                    <th>🌲 Decision Tree</th>
                                    <th>📊 K-Nearest Neighbors</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Recommended Champion</strong></td>
                                    <td class="${winner === 'random-forest' ? 'table-winner' : ''}">${mlResults['random-forest'].champion}</td>
                                    <td class="${winner === 'decision-tree' ? 'table-winner' : ''}">${mlResults['decision-tree'].champion}</td>
                                    <td class="${winner === 'knn' ? 'table-winner' : ''}">${mlResults['knn'].champion}</td>
                                </tr>
                                <tr>
                                    <td><strong>Confidence Score</strong></td>
                                    <td class="${winner === 'random-forest' ? 'table-winner' : ''}">${mlResults['random-forest'].confidence.toFixed(1)}%</td>
                                    <td class="${winner === 'decision-tree' ? 'table-winner' : ''}">${mlResults['decision-tree'].confidence.toFixed(1)}%</td>
                                    <td class="${winner === 'knn' ? 'table-winner' : ''}">${mlResults['knn'].confidence.toFixed(1)}%</td>
                                </tr>
                                <tr>
                                    <td><strong>Model Accuracy</strong></td>
                                    <td class="table-winner">92%</td>
                                    <td>87%</td>
                                    <td>89%</td>
                                </tr>
                                <tr>
                                    <td><strong>Interpretability</strong></td>
                                    <td>Medium</td>
                                    <td class="table-winner">High</td>
                                    <td>Medium</td>
                                </tr>
                                <tr>
                                    <td><strong>Robustness</strong></td>
                                    <td class="table-winner">High</td>
                                    <td>Medium</td>
                                    <td>Medium</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="strategy-section">
                    <h3>🎯 Your Preference Analysis</h3>
                    <div class="preference-grid">
                        <div class="preference-item">
                            <h4>🎭 Role Preference</h4>
                            <div class="preference-value">${answers[1]}</div>
                            <div class="preference-description">All algorithms prioritized this role in their matching process</div>
                        </div>
                        <div class="preference-item">
                            <h4>⚡ Difficulty Level</h4>
                            <div class="preference-value">${answers[2]}/10</div>
                            <div class="preference-description">Matched against champion complexity ratings</div>
                        </div>
                        <div class="preference-item">
                            <h4>⚔️ Damage Output</h4>
                            <div class="preference-value">${answers[3]}/10</div>
                            <div class="preference-description">Weighted heavily in all scoring functions</div>
                        </div>
                        <div class="preference-item">
                            <h4>🛡️ Survivability</h4>
                            <div class="preference-value">${answers[4]}/10</div>
                            <div class="preference-description">Considered for durability matching</div>
                        </div>
                        <div class="preference-item">
                            <h4>🎮 Playstyle</h4>
                            <div class="preference-value">${answers[5]}</div>
                            <div class="preference-description">Applied as bonus criteria for champion selection</div>
                        </div>
                        <div class="preference-item">
                            <h4>📊 Champions Analyzed</h4>
                            <div class="preference-value">${Object.keys(allChampions).length}</div>
                            <div class="preference-description">Total champions evaluated by all algorithms</div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('results').classList.remove('active');
            document.getElementById('detailed-analysis').classList.add('active');
        }

        function backToResults() {
            document.getElementById('detailed-analysis').classList.remove('active');
            document.getElementById('results').classList.add('active');
        }

        function restartQuestionnaire() {
            answers = {};
            currentQuestion = 1;
            mlResults = {};
            
            document.getElementById('results').classList.remove('active');
            document.getElementById('detailed-analysis').classList.remove('active');
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });
            
            document.getElementById('start-screen').style.display = 'block';
            
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('[id^="next-"]').forEach(btn => btn.disabled = true);
        }

        // Manual CSV export function
        function exportToCSV() {
            const userData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
            if (userData.length === 0) {
                alert('No user data to export');
                return;
            }
            
            // Create CSV content
            const headers = [
                'ID', 'Full Name', 'Email', 'Phone', 'Age', 'Gender', 
                'LoL Experience', 'Registration Date', 'Session ID',
                'Recommended Champion', 'Winning Algorithm', 'Confidence Score',
                'Random Forest Champion', 'Random Forest Confidence',
                'Decision Tree Champion', 'Decision Tree Confidence',
                'KNN Champion', 'KNN Confidence', 'Consensus Level',
                'User Answers', 'Completion Date'
            ];
            
            let csvContent = headers.join(',') + '\\n';
            
            userData.forEach((user, index) => {
                const row = [
                    index + 1,
                    user.fullName || '',
                    user.email || '',
                    user.phone || '',
                    user.age || '',
                    user.gender || '',
                    user.experience || '',
                    user.registrationDate || '',
                    user.sessionId || '',
                    user.recommendedChampion || '',
                    user.winningAlgorithm || '',
                    user.confidence || '',
                    user.randomForestChampion || '',
                    user.randomForestConfidence || '',
                    user.decisionTreeChampion || '',
                    user.decisionTreeConfidence || '',
                    user.knnChampion || '',
                    user.knnConfidence || '',
                    user.consensusLevel || '',
                    user.userAnswers || '',
                    user.completionDate || ''
                ].map(field => `"${field}"`);
                
                csvContent += row.join(',') + '\\n';
            });
            
            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'champion_recommender_users.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            console.log(`📊 Exported ${userData.length} users to CSV file`);
            alert(`Successfully exported ${userData.length} users to CSV file!`);
        }
        
        // Keyboard shortcut for manual export
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'E') {
                e.preventDefault();
                exportToCSV();
            }
        });

        console.log(`Multi-ML Champion Recommender loaded with ${Object.keys(allChampions).length} champions and 3 ML algorithms!`);

        // Admin panel (hidden) - Press Ctrl+Shift+A to access
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                showAdminPanel();
            }
        });

        function showAdminPanel() {
            const userData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
            const userCount = userData.length;
            
            const message = `Admin Panel\n\nTotal registered users: ${userCount}\n\nOptions:\n- OK: Export CSV file\n- Cancel: Close panel\n\nNote: Data is stored locally. Press Ctrl+Shift+E anytime to export CSV.`;
            
            if (confirm(message)) {
                exportToCSV();
            }
        }

        // Auto-save user data periodically
        setInterval(() => {
            const userData = JSON.parse(localStorage.getItem('championRecommenderUsers') || '[]');
            if (userData.length > 0) {
                console.log(`${userData.length} users registered so far`);
            }
        }, 60000); // Check every minute
    </script>
</body>
</html>